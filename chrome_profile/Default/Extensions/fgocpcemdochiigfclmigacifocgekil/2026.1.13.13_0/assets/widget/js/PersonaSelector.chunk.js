"use strict";(window.daChatWidgetJsonpFunction=window.daChatWidgetJsonpFunction||[]).push([[750],{44693:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var s,l=a(73021),r=a(62771),n=a.n(r),c=a(69832),o=a(38853),m=a(11177),i=a(7894),u=a(23912),d=a(25860);const p=["svgRef"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},v.apply(null,arguments)}const C=e=>{let{svgRef:t}=e,a=function(e,t){if(null==e)return{};var a,s,l=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}(e,p);return l.createElement("svg",v({width:20,height:20,viewBox:"0 0 20 20",fill:"none",ref:t},a),s||(s=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10ZM14.8641 6.0878C15.0496 5.88324 15.3583 5.8757 15.5536 6.07096C15.7488 6.26622 15.7567 6.59035 15.5712 6.79491L8.50099 14.592C8.35249 14.7558 8.12507 14.7933 7.94007 14.7016C7.87615 14.6752 7.81658 14.6341 7.76613 14.5785L4.33587 10.7956C4.15037 10.591 4.15829 10.2669 4.35355 10.0716C4.54882 9.87636 4.85748 9.8839 5.04297 10.0885L8.1397 13.5036L14.8641 6.0878Z",fill:"#86BC25"})))},_=l.forwardRef((e,t)=>l.createElement(C,v({svgRef:t},e)));a.p;var E=a(34371);const b=e=>E.Rg[e],f=e=>E.vl[b(e.code)],h=e=>{let{userAttributes:t,isSelectedView:a}=e;const[s]=(0,l.useState)(()=>[...t].sort((e,t)=>f(e)>f(t)?1:-1));return l.createElement(l.Fragment,null,a?s.map(e=>l.createElement("div",{className:"persona-custom-attributes__item",key:e.id},l.createElement("span",{className:"persona-custom-attributes__name"},b(e.code)),l.createElement("span",{className:n()({"persona-custom-attributes__value":!a})},e.value?e.value:e.valueCode))):l.createElement("table",{className:"persona-attribute__table"},l.createElement("tbody",null,s.map(e=>l.createElement("tr",{className:"persona-attribute",key:e.id},l.createElement("td",{className:"persona-attribute__name"},b(e.code)),l.createElement("td",{className:"persona-attribute__value"},e.value?e.value:e.valueCode))))))},N=e=>{let{persona:t,selectedPersona:a,setSelectedPersona:s,isSelectedView:r}=e;const[c,o]=(0,l.useState)(!1),m=(0,l.useCallback)(()=>{o(!c)},[c]);return l.createElement("div",{className:n()("persona-item",{"persona-item--active":a&&a.id===t.id}),onClick:()=>s&&s(t)},l.createElement(_,{className:"persona-item__selected-icon"}),l.createElement("h2",{className:"persona-item__title"},t.name),l.createElement("p",{className:n()("persona-item__description",{"persona-item__description--simplify":!c})},t.description),l.createElement(h,{isSelectedView:r,userAttributes:t.userAttributes}),c&&t.customAttributes.length>0&&l.createElement("div",{className:"persona-custom-attributes"},l.createElement("span",{className:"persona-custom-attributes__title"},"Custom attributes"),t.customAttributes.map(e=>l.createElement("div",{className:"persona-custom-attributes__item",key:e.id},l.createElement("span",{className:"persona-custom-attributes__name"},e.code),l.createElement("span",{className:"persona-custom-attributes__value"},e.value?e.value:e.valueCode)))),t&&(t.customAttributes.length>0||t.description&&t.description.length>153)&&l.createElement("span",{onClick:m,className:"persona-item__see-more"},c?"See less":"See more"))};var w=a(89379),g=a(44832),S=a(9271);const k=e=>{let{personaTemplates:t,currentEnvironment:a,currentMemberFirmId:s,onRestartConversation:r}=e;const n=(0,i.j)(),c=(0,l.useRef)(),[u,d]=(0,l.useState)(null),p=(0,l.useCallback)(()=>{n((0,o.om)(!1))},[n]),v=(0,l.useCallback)(e=>{d(e)},[]),C=(0,l.useCallback)(e=>{n((0,m.GO)(e))},[n]),_=(0,l.useCallback)(()=>{const e=(0,w.A)((0,w.A)({},u),{},{environment:a,memberFirmId:s});p(),r(),C(e),n((0,m.Hu)(u))},[u,s,a,p,r,C,n]),E=(0,l.useCallback)(e=>{const t=e.target.value,a={memberFirmId:s,pattern:t};n((0,m.C8)(a))},[s,n]);return l.createElement("div",{className:"da-personaSelector__modal-selector"},l.createElement("span",{className:"arrow"}),l.createElement("div",{className:"modal-selector__header"},l.createElement("span",{className:"header-text"},"Select persona")),l.createElement("div",{className:"modal-selector__content"},l.createElement("div",{className:"da-dropdown__search"},l.createElement("svg",{className:"da-dropdown__searchSvg",fill:"#97999B",height:"24",viewBox:"0 0 1024 1024",width:"24",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M761.813 731.52l-192-192c71.97-87.999 62.292-216.976-22.006-293.249s-213.596-73.044-293.981 7.341c-80.385 80.385-83.614 209.684-7.341 293.981s205.249 93.976 293.249 22.006l192 192c8.464 7.249 21.081 6.761 28.961-1.119s8.367-20.497 1.119-28.961zM405.333 576c-94.257 0-170.667-76.41-170.667-170.667s76.41-170.667 170.667-170.667S576 311.076 576 405.333A170.67 170.67 0 01405.333 576z"})),l.createElement(g.A,{labelKey:S.z.PersonaSelectorPlaceholder,renderElement:e=>l.createElement("input",{ref:c,placeholder:e,className:"da-dropdown__searchInput",onChange:E,type:"text"})})),t.map(e=>l.createElement(N,{key:e.id,isSelectedView:!1,persona:e,selectedPersona:u,setSelectedPersona:e=>v(e)}))),l.createElement("div",{className:"modal-selector__footer"},l.createElement("button",{className:"o-button o-button--secondary",onClick:p},"Cancel"),l.createElement("button",{className:"modal-selector__button o-button",disabled:!u,onClick:_},"Select")))},y=()=>{const e=(0,i.j)(),t=(0,i.G)(u.xA),a=(0,i.G)(u.Pc),s=(0,i.G)(d.E9),r=(0,i.G)(u.xY),p=(0,i.G)(d.Re),v=(0,i.G)(d.VF),C=(0,l.useMemo)(()=>"Persona",[]),_=(0,l.useMemo)(()=>"Clear",[]),E=(0,l.useMemo)(()=>p===c.XU.Released||p===c.XU.Traces||r,[p,r]);(0,l.useEffect)(()=>{e((0,m.Hu)(null)),e((0,o.om)(!1))},[p,e]),(0,l.useEffect)(()=>{if(v&&!E){const t={memberFirmId:v,pattern:""};e((0,m.C8)(t))}},[e,v,E]);const b=(0,l.useCallback)(()=>{e((0,o.om)(!s))},[e,s]),f=(0,l.useCallback)(t=>{e((0,m.GO)(t))},[e]),h=(0,l.useCallback)(()=>{e((0,m.S8)({force:!0}))},[e]),w=(0,l.useCallback)(()=>{h(),f(null),e((0,m.Hu)(null))},[e,h,f]);return l.createElement("div",{className:"da-chat__persona-selector--full"},l.createElement("div",{className:"da-personaSelector__wrapper"},l.createElement("div",{className:"da-personaSelector__header"},l.createElement("span",{className:"header-text"},C),a&&l.createElement("span",{onClick:w,className:"header-clear"},_)),a?l.createElement(N,{persona:a,isSelectedView:!0}):l.createElement("div",{className:"da-personaSelector__content"},l.createElement("div",{onClick:b,className:n()("da-personaSelector__select",{"da-personaSelector__select--disabled":E})},l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.89247 4.8243C6.89247 3.9623 7.60467 3.25 8.50002 3.25C9.39537 3.25 10.1076 3.9623 10.1076 4.8243C10.1076 5.6863 9.39537 6.3986 8.50002 6.3986C7.60467 6.3986 6.89247 5.6863 6.89247 4.8243ZM8.50002 2.25C7.06744 2.25 5.89247 3.39509 5.89247 4.8243C5.89247 6.25351 7.06744 7.3986 8.50002 7.3986C9.9326 7.3986 11.1076 6.25351 11.1076 4.8243C11.1076 3.39509 9.9326 2.25 8.50002 2.25ZM4.98402 10.5182C6.33472 9.80178 7.42338 9.47209 8.48513 9.4729C9.54755 9.47371 10.6431 9.80546 12.0075 10.5207C12.4554 10.7554 12.734 11.2346 12.734 11.7667V13.242C12.734 13.5226 12.9614 13.75 13.242 13.75C13.5226 13.75 13.75 13.5226 13.75 13.242V11.7667C13.75 10.8983 13.2932 10.0616 12.4851 9.63803C11.0411 8.88112 9.77699 8.47389 8.48591 8.4729C7.19415 8.47192 5.93539 8.87762 4.50202 9.63787C3.70059 10.0629 3.25 10.8958 3.25 11.7583V13.242C3.25 13.5226 3.47745 13.75 3.75801 13.75C4.03858 13.75 4.26603 13.5226 4.26603 13.242V11.7583C4.26603 11.2294 4.54097 10.7532 4.98402 10.5182Z",fill:"#00A3E0"})),l.createElement("span",{className:"select-title"},"Select persona")),s&&!r&&l.createElement(k,{personaTemplates:t,currentEnvironment:p,currentMemberFirmId:v,onRestartConversation:h}))))},R=(0,l.memo)(y)}}]);