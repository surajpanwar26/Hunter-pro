"use strict";(window.daChatWidgetJsonpFunction=window.daChatWidgetJsonpFunction||[]).push([[965],{20202:(e,s,n)=>{n.r(s),n.d(s,{default:()=>v});var t=n(89379),i=n(73021),o=n(28070),a=n(52271),r=(n(78158),n(3766)),u=n(26566),c=n(48340),l=n(77713),d=n(46642),g=n(74393),p=n(56076),f=n(49477),C=n(17473);const m=e=>{let{avatar:s,customClassName:n}=e;const t=(0,i.useMemo)(()=>n||"da-chatAgent__img",[n]);return i.createElement("span",{className:t,style:{backgroundImage:"url(".concat(s,")")}})},h=u.Y.getInstance();const v=function(e){var s,n,u,v,k,S,E,U,b,I,M,A,Q,T,w,y,F,W;const[_,R]=(0,i.useReducer)(l.F,{},l.W),[D,P]=(0,i.useState)(h.getInitialJustCreatedMessageId()),L=(0,i.useRef)(null),{onAnyMessage:K}=(0,o.v9)();(0,o.Nx)(_.messages.length,L.current);const O=(0,i.useRef)([]);O.current=_.messages;const{config:x,languageCode:$,isOpen:q,messages:B,sessionQueue:J,sessionQueueError:j,onLanguageChange:N,onEvent:V,onMessagesForwarded:Z,dept:Y,onStartNewChat:G,isApp:X}=e,z=(0,i.useMemo)(()=>e.config.formData.externalId,[e.config.formData.externalId]),H=(0,i.useMemo)(()=>h.canTypeMessage(_,B),[B,_]),ee=(0,i.useMemo)(()=>h.canSendMessage(_,B),[B,_]),se=(0,i.useMemo)(()=>h.canPerformActiveChatActions(_),[_]),ne=(0,i.useMemo)(()=>_.sessionStatus===g._T.Initial&&(null===B||0===B.length),[B,_.sessionStatus]),te=(0,i.useMemo)(()=>_.sessionStatus===g._T.Waiting,[_.sessionStatus]),ie=(0,i.useMemo)(()=>_.users.filter(e=>h.isConnectedUser(e.id,_.disconnectedUsers)),[_.users,_.disconnectedUsers]),oe=(0,i.useMemo)(()=>new c.Kc(e.qDependency.apiFetch,e.qDependency.widgetStore),[e.qDependency.apiFetch,e.qDependency.widgetStore]),ae=(0,i.useRef)(null);(0,i.useRef)(q).current=q;const re=(0,i.useCallback)(()=>({agents:(_?_.users:[]).map(e=>e.id),departmentApiKey:Y}),[Y,_]),ue=(0,i.useCallback)(()=>new Promise((e,s)=>j?s(J):(R((0,d.YA)(J)),e(J))),[J,j]),ce=(0,i.useCallback)(e=>{switch(clearTimeout(ae.current),ae.current=null,e){case g.$u.Typing:ae.current=setTimeout(()=>{ce(g.$u.TypingPause)},750);case g.$u.TypingCancel:case g.$u.TypingPause:}e!==_.currentUserTypingStatus&&R((0,d.ID)(e))},[_.currentUserTypingStatus]),le=(0,i.useCallback)((e,s,n)=>{const t=_.sessionQueue&&_.sessionQueue.messages?_.sessionQueue.messages:null;return h.translate(t,e,s,n)},[_.sessionQueue]),de=(0,i.useCallback)(()=>h.createUser(z,Y,x.apiEndpoint,_.currentLanguage&&_.currentLanguage.code).then(e=>(oe.sendInformationEvent(c.MW.CreateChatLingualUser,{name:c.KA.CreateChatLingualUser,userId:e.id+""}),R((0,d.vF)(e)),e)).catch(e=>{throw oe.sendErrorEvent(c.MW.ErrorCreateChatLingualUser,{name:c.KA.ErrorCreateChatLingualUser,value:String(e)}),Error(e)}),[x.apiEndpoint,Y,z,oe,_.currentLanguage]),ge=(0,i.useCallback)(()=>{if(!_.currentUser)return;const e=h.getUserLanguage(_.currentUser).id;h.getSession(_.currentUser.id,_.currentUser.userRoles[0].code,e,z,Y,x.apiEndpoint).then(e=>{oe.sendInformationEvent(c.MW.CreateSession,{name:c.KA.CreateSession,sessionId:e.id+""}),R((0,d.NT)(e))}).catch(e=>{throw oe.sendErrorEvent(c.MW.ErrorCreateSession,{name:c.KA.ErrorCreateSession,value:String(e)}),Error(e)})},[x.apiEndpoint,Y,z,oe,_.currentUser]),pe=(0,i.useCallback)(e=>{let s=D;return e.forEach(e=>{e.id=s,s=h.getNextJustCreatedMessageId(s)}),P(s),e},[D]),fe=(0,i.useCallback)(e=>{const s=_.sessionQueue&&_.sessionQueue.messages?_.sessionQueue.messages:null,n=pe(e.map(e=>h.getUiCurrentUserMessageByText(e,s,_.currentUser,_.currentLanguage)));R((0,d.iX)(n))},[_.sessionQueue,_.currentUser,_.currentLanguage,pe]),Ce=(0,i.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return h.sendMessage(e,s,_.socket,_.currentUser,_.session.id).then()},[_.currentUser,null===(s=_.session)||void 0===s?void 0:s.id,_.socket]),me=(0,i.useCallback)(e=>e.reduce((e,s)=>e.then(()=>Ce(s)),Promise.resolve()),[Ce]),he=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const s=Ve.current;s&&(s.value="",e||ce(g.$u.TypingCancel))},[ce]),ve=(0,i.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(arguments.length>2?arguments[2]:void 0)&&he(s),Ce(e,s).then()},[he,Ce]),ke=(0,i.useCallback)(e=>{K(e),R((0,d.iX)(e))},[K]),Se=(0,i.useCallback)(e=>{const s=e.map(e=>h.prepareObj(e)).filter(e=>h.isSameSession(_.session,e));if(0===s.length)return;const n=h.convertToUiMessages(s,_.currentUser,_.sessionQueue.messages),t=[],i=[];n.forEach(e=>{if(!h.isMessage(e))return;const s=e,n=O.current.find(e=>{if(!h.isMessage(e))return!1;const n=e;return h.isJustCreatedMessage(n)&&h.messageBodiesEqual(n.body,s.body)||s.id===n.id});n?i.push({updateMessageId:n.id,messageReplacement:s}):t.push(e)}),t.length>0&&ke(t),i.length>0&&R((0,d.Ui)(i))},[_.currentUser,null===(n=_.sessionQueue)||void 0===n?void 0:n.messages,_.session,ke]),Ee=(0,i.useCallback)(e=>{e=h.prepareObj(e),h.isSameSession(_.session,e)&&R((0,d.Li)(e.position))},[_.session]),Ue=(0,i.useCallback)(e=>{if(e=h.prepareObj(e),!h.isSameSession(_.session,e))return;const s=e.status;R((0,d.Zj)(s)),s===g._T.ClosedAbandoned||s===g._T.Closed?oe.sendInformationEvent(c.MW.Closed,{name:c.KA.Closed,sessionId:e.sessionId+"",endedByUserId:e.endedBy.id+"",role:e.endedBy?e.endedBy.userRoles[0].name:""}):oe.sendInformationEvent(c.MW.ChangedSessionStatus,{name:c.KA.ChangedSessionStatus,sessionId:_.session.id+"",userId:_.currentUser.id+"",sessionStatus:e.status})},[oe,null===(u=_.currentUser)||void 0===u?void 0:u.id,_.session]),be=(0,i.useCallback)(e=>{e=h.prepareObj(e),h.isSameSession(_.session,e)&&h.isSessionInfoAssignment(e.info)&&_.sessionStatus===g._T.Initial&&R((0,d.Zj)(g._T.Waiting))},[_.session,_.sessionStatus]),Ie=(0,i.useCallback)(e=>{if(e=h.prepareObj(e),!h.isSameSession(_.session,e))return;if(e.target&&_.currentUser&&e.target!==_.currentUser.id)return;if(!e.interaction||e.interaction.fullSize||!e.interaction.data)return;if((e.interaction&&e.interaction.type)===g.IL.Options)Se([e])},[Se,_.currentUser,_.session]),Me=(0,i.useCallback)(()=>{R((0,d.Sd)("")),R((0,d.t$)(g._V.Connected))},[]),Ae=(0,i.useCallback)(()=>{oe.sendInformationEvent(c.MW.ConnectedToSocket,{name:c.KA.ConnectedToSocket,userId:_.currentUser.id+""}),Me()},[oe,Me,null===(v=_.currentUser)||void 0===v?void 0:v.id]),Qe=(0,i.useCallback)(e=>{console.log("socket error :>> ",e),oe.sendErrorEvent(c.MW.ErrorSocket,{name:c.KA.ErrorSocket,sessionId:_.session?_.session.id+"":"",userId:_.currentUser.id+"",value:String(e)});const s=e?String(e):"Socket connection error";R((0,d.Sd)(s))},[oe,null===(k=_.currentUser)||void 0===k?void 0:k.id,_.session]),Te=(0,i.useCallback)(()=>{oe.sendWarningEvent(c.MW.Disconnect,{name:c.KA.Disconnect,sessionId:_.session?_.session.id+"":"",userId:_.currentUser.id+""}),R((0,d.t$)(g._V.Disconnect))},[oe,null===(S=_.currentUser)||void 0===S?void 0:S.id,_.session]),we=(0,i.useCallback)(()=>{oe.sendInformationEvent(c.MW.ReconnectToSocket,{name:c.KA.ReconnectToSocket,sessionId:_.session?_.session.id+"":"",userId:_.currentUser.id+""}),Me()},[oe,Me,null===(E=_.currentUser)||void 0===E?void 0:E.id,_.session]),ye=(0,i.useCallback)(()=>{R((0,d.t$)(g._V.Reconnecting)),oe.sendInformationEvent(c.MW.ReconnectingToSocket,{name:c.KA.ReconnectingToSocket,sessionId:_.session?_.session.id+"":"",userId:_.currentUser.id+""})},[oe,null===(U=_.currentUser)||void 0===U?void 0:U.id,_.session]),Fe=(0,i.useCallback)(()=>{R((0,d.t$)(g._V.ReconnectFailed)),oe.sendInformationEvent(c.MW.ReconnectToSocketFailed,{name:c.KA.ReconnectingToSocketFailed,sessionId:_.session?_.session.id+"":"",userId:_.currentUser.id+""})},[oe,null===(b=_.currentUser)||void 0===b?void 0:b.id,_.session]),We=(0,i.useCallback)(e=>(e.on(g.nQ.Error,Qe),e.on(g.nQ.ConnectError,Qe),e.on(g.nQ.Connect,Ae),e.on(g.nQ.Disconnect,Te),e.on(g.nQ.Reconnect,we),e.on(g.nQ.Reconnecting,ye),e.on(g.nQ.ReconnectFailed,Fe),()=>{e.off(g.nQ.Error,Qe),e.off(g.nQ.Connect,Ae)}),[Te,we,Fe,ye,Ae,Qe]),_e=(0,i.useCallback)(e=>{e&&e.connected&&e.disconnect()},[]),Re=(0,i.useCallback)(()=>{R((0,d.vS)(le("wait_time_ended","We'll be with you shortly!")))},[le]),De=(0,i.useCallback)(e=>{R((0,d.P9)(e))},[]),Pe=(0,i.useCallback)(e=>{R((0,d.ME)(e))},[]),Le=(0,i.useCallback)(e=>{R((0,d.tj)(e))},[]),Ke=(0,i.useCallback)(e=>{Pe(e.id)},[Pe]),Oe=(0,i.useCallback)(e=>{Le(e.id)},[Le]),xe=(0,i.useCallback)(e=>{Le(e.id)},[Le]),$e=(0,i.useCallback)(e=>{R((0,d.oc)(e))},[]),qe=(0,i.useCallback)(e=>{R((0,d.BJ)(e))},[]),Be=(0,i.useCallback)((e,s,n)=>{const t=h.getUser(n,_.users);if(!t)return"";return h.getUserName(t,"Agent")+" "+le(e,s)},[_.users,le]),Je=(0,i.useCallback)(e=>Be("typing","is typing....",e),[Be]),je=(0,i.useCallback)(e=>h.getUserAvatar(e,_.users,_.sessionQueue.s3AvatarsBucket),[null===(I=_.sessionQueue)||void 0===I?void 0:I.s3AvatarsBucket,_.users]),Ne=(0,i.useCallback)(e=>{e=h.prepareObj(e),De(e),qe(e.id),h.isAgent(e)&&oe.sendInformationEvent(c.MW.JoinAgent,{name:c.KA.JoinAgent,sessionId:_.session.id+"",userId:_.currentUser.id+"",agentId:e.id+""})},[De,oe,qe,null===(M=_.currentUser)||void 0===M?void 0:M.id,null===(A=_.session)||void 0===A?void 0:A.id]),Ve=(0,i.useRef)(null),Ze=(0,i.useCallback)(e=>{(e=e.trim())&&_.sessionQueue&&(fe([e]),e.length&&!_.firstMessage?(R((0,d.C7)(e)),he()):_.session&&ve(e,null,!0))},[fe,he,ve,_.firstMessage,_.session,_.sessionQueue]),Ye=(0,i.useCallback)(e=>{e.length&&!_.userInteracted&&R((0,d.Jo)(!0)),ce(e?g.$u.Typing:g.$u.TypingCancel)},[ce,_.userInteracted]),Ge=(0,i.useCallback)((e,s)=>{h.sendInteractionResponse(e,s,_.socket,_.currentUser.id,_.session.id)},[null===(Q=_.currentUser)||void 0===Q?void 0:Q.id,null===(T=_.session)||void 0===T?void 0:T.id,_.socket]),Xe=(0,i.useCallback)(e=>_.messages.length>0&&_.messages[_.messages.length-1].id!==e,[_.messages]),ze=(0,i.useRef)(null),He=(0,i.useCallback)(e=>{const s=e.target.files&&e.target.files[0],n=!!s;n!==_.isUploadFileModalShown&&R((0,d.K8)(n)),R((0,d.md)(s)),ze.current&&(ze.current.value="")},[_.isUploadFileModalShown]),es=(0,i.useCallback)(()=>{R((0,d.K8)(!1)),R((0,d.Dc)(""))},[]),ss=(0,i.useCallback)(()=>{_.session&&h.uploadToAws(_.uploadFile,_.session.id,x.apiEndpoint,e=>R((0,d.xe)(100*e)),e.qDependency.apiFetch,Y).then(e=>{ve("".concat(_.fileDescription," ").concat(e),"attachment",!1)}).catch(e=>{console.log("Filed upload failed :>> ",e)}).finally(()=>{R((0,d.K8)(!1))}),R((0,d.Dc)(""))},[x.apiEndpoint,Y,e.qDependency.apiFetch,ve,_.fileDescription,_.session,_.uploadFile]),ns=(0,i.useRef)(null),ts=(0,i.useCallback)(e=>{R((0,d.Dc)(e))},[]),is=(0,i.useCallback)((e,s)=>{h.isAgent(e)&&(s.reason===g.fr.Disconnected&&($e(e.id),Le(e.id)),oe.sendInformationEvent(c.MW.PartAgent,{name:c.KA.PartAgent,sessionId:_.session.id+"",agentId:e.id+"",reason:s.reason}))},[$e,oe,Le,null===(w=_.session)||void 0===w?void 0:w.id]);(0,i.useLayoutEffect)(()=>{if(!_.isUploadFileModalShown&&ns&&ns.current){ns.current.value=""}},[_.isUploadFileModalShown]);const os=(0,i.useCallback)(()=>{h.endChat(_.session.id,_.socket).catch(()=>{})},[null===(y=_.session)||void 0===y?void 0:y.id,_.socket]),as=(0,i.useCallback)(()=>{R((0,d.pE)()),ue()},[ue]),rs=(0,i.useCallback)(e=>{h.getAlternativeTranslation(e,x.apiEndpoint).then(s=>{s&&s.message&&R((0,d.x2)({id:e.id,body:s.message}))}).catch(e=>{oe.sendErrorEvent(c.MW.ErrorAlternativeTranslation,{name:c.KA.ErrorAlternativeTranslation,value:String(e)})})},[x.apiEndpoint,oe]),us=(0,i.useCallback)(e=>{if(e=h.prepareObj(e),!h.isSameSession(_.session,e))return;if(e.whisperMode)return;const s=e.user;if(!_.currentUser||s.id===_.currentUser.id)return;switch(e.status){case g.$u.Join:Ne(s);break;case g.$u.Typing:Ke(s);break;case g.$u.TypingCancel:Oe(s);break;case g.$u.TypingPause:xe(s);break;case g.$u.Part:is(s,e)}},[Ne,is,Ke,Oe,xe,_.currentUser,_.session]),cs=(0,i.useCallback)(e=>(e.on(g.nQ.Message,e=>{Se([e])}),e.on(g.nQ.QueuePosition,e=>{Ee(e)}),e.on(g.nQ.UserStatus,e=>{us(e)}),e.on(g.nQ.SessionStatus,e=>{Ue(e)}),e.on(g.nQ.sessionInfo,e=>{be(e)}),e.on(g.nQ.InteractionRequest,e=>{Ie(e)}),()=>{_e(e)}),[_e,Ie,Se,Ee,be,Ue,us]);(0,i.useEffect)(()=>{r.Y.setStateFn(()=>_),r.Y.next(_)},[_]),(0,i.useEffect)(()=>{(()=>{const e=_.sessionQueue&&_.sessionQueue.previousActive;if(e&&e.session&&e.user&&e.session.users){const s=e.session.users.find(e=>h.isAgent(e));oe.sendInformationEvent(c.MW.RestoredSession,{name:c.KA.RestoredSession,userId:e.user.id+"",sessionId:e.session.id+"",agentId:s?s.id+"":""})}})();j&&oe.sendErrorEvent(c.MW.ErrorGetSessionQueues,{name:c.KA.ErrorGetSessionQueues,value:j})},[_.sessionQueue,j,oe]),(0,i.useEffect)(()=>{_.session&&_.sessionQueue&&!_.sessionQueue.previousActive&&G()},[_.session,_.sessionQueue]),(0,i.useEffect)(()=>{_.sessionStatus===g._T.Waiting&&_.sessionQueue&&!_.sessionQueue.previousActive&&null!==_.initialQueuePosition&&V(h.createEventOnChatQueued((0,t.A)((0,t.A)({},re()),{},{position:_.initialQueuePosition})))},[_,_.queuePosition,_.sessionStatus]),(0,i.useEffect)(()=>{if(q){(()=>{h.isDeptSwitchedForActiveChat(_.sessionQueue,J)?as():_.sessionStatus!==g._T.Initial||ue()})()}},[q,$,J,_.sessionQueue,_.sessionStatus]),(0,i.useEffect)(()=>{_.currentUser&&h.getCsrfToken(x.apiEndpoint).then(e=>{R((0,d.dx)(e))}).catch(e=>{throw oe.sendErrorEvent(c.MW.ErrorGetCsrfToken,{name:c.KA.ErrorGetCsrfToken,value:String(e)}),Error(e)})},[x.apiEndpoint,oe,_.currentUser]),(0,i.useEffect)(()=>{_.userInteracted&&!_.currentUser&&de()},[_.userInteracted,_.currentUser]),(0,i.useEffect)(()=>(()=>{if(_.csrfData&&_.userInteracted){const e=h.connectToSocket(_.currentUser,_.csrfData.csrfToken,x.wssEndpoint,Y);return R((0,d.c9)(e)),We(e)}return()=>{}})(),[x.wssEndpoint,Y,_.csrfData,_.currentUser,_.userInteracted]),(0,i.useEffect)(()=>_.socket&&_.session?cs(_.socket):()=>{},[_.socket,_.session]),(0,i.useEffect)(()=>{_.socket&&_.sessionQueue&&!_.sessionQueue.previousActive&&_.firstMessage&&(_.session||ge())},[_.socket,_.sessionQueue,_.firstMessage,_.session]),(0,i.useEffect)(()=>{_.session&&_.socket&&_.sessionQueue&&!_.sessionQueue.previousActive&&_.firstMessage&&h.isConnectionAvailable(_.connectionStatus)&&h.joinSession(_.socket,_.session.id,_.currentUser.id,z,Y).then(e=>(oe.sendInformationEvent(c.MW.JoinSession,{name:c.KA.JoinSession,sessionId:_.session.id+"",userId:_.currentUser.id+""}),e)).then(e=>ve(_.firstMessage,null,!0))},[_.session,_.socket,_.sessionQueue,_.firstMessage,null===(F=_.currentUser)||void 0===F?void 0:F.id,z,Y,oe,_.connectionStatus]),(0,i.useEffect)(()=>{_.currentUserTypingStatus&&_.socket&&_.session&&h.sendStatus(_.session.id,_.currentUserTypingStatus,_.socket)},[_.currentUserTypingStatus,_.session,_.socket]),(0,i.useEffect)(()=>{_.sessionStatus===g._T.Initial&&_.sessionQueue&&!_.sessionQueue.previousActive&&B&&B.length&&!_.firstMessage&&(R((0,d.Jo)(!0)),R((0,d.C7)(B[0])))},[B,_.sessionStatus,_.sessionQueue,_.firstMessage]),(0,i.useEffect)(()=>{if((_.sessionStatus===g._T.Waiting||_.sessionStatus===g._T.InProgress)&&_.sessionQueue&&null!==B&&!_.isMessagesForwarded){const e=B.filter(e=>e!==_.firstMessage);!_.sessionQueue.previousActive&&e.length?me(e).then(e=>{Z(),R((0,d.wZ)(!0))}):R((0,d.wZ)(!0))}},[B,_.sessionStatus,_.isMessagesForwarded,_.sessionQueue,_.firstMessage,_.currentLanguage]),(0,i.useEffect)(()=>{_.sessionQueue&&null!==B&&!_.isMessagesForwardedOptimistically&&_.currentUser&&(!_.sessionQueue.previousActive&&B.length?(fe(B),R((0,d.BF)(!0))):R((0,d.BF)(!0)))},[fe,B,Z,me,_.currentUser,_.firstMessage,_.isMessagesForwardedOptimistically,_.sessionQueue]),(0,i.useEffect)(()=>{switch(_.sessionStatus){case g._T.Closed:V(h.createEventOnChatTerminated(re()));break;case g._T.Waiting:_.waitingMessage||R((0,d.vS)(le("wait_time_text","Estimated wait time is less than 2 minutes")));break;case g._T.InProgress:null!==_.prevSessionStatus&&V(h.createEventOnChatInitiated(re()))}},[_.prevSessionStatus,_.sessionStatus,_.socket,_.waitingMessage]),(0,i.useEffect)(()=>{if(H){const e=Ve.current;e&&(e.value="",e.focus())}},[H]),(0,i.useEffect)(()=>{const e=_.currentLanguage?_.currentLanguage.code:null;N(e)},[N,_.currentLanguage]);const ls=(0,i.useCallback)(()=>{R((0,d.U2)(!1))},[]),ds=(0,i.useCallback)(()=>{R((0,d.U2)(!0))},[]),gs=(0,i.useMemo)(()=>_.typingUsers.map(e=>Je(e)).join(", "),[Je,_.typingUsers]),ps=(0,i.useCallback)((e,s)=>s.isCurrentUser?null:i.createElement(m,{avatar:je(e.id),customClassName:"da-chatMessage__img"}),[je]);return i.createElement(p.A,{ref:L,fileUploadShow:_.isUploadFileModalShown,fileUploadTitle:(0,a.Z)(le("upload","Upload")),fileUploadCancelLabel:le("cancel","Cancel"),fileUploadConfirmLabel:le("upload","Upload"),fileUploadIsInProgress:_.fileUploadProgress>0&&_.fileUploadProgress<100,fileUploadFileName:_.uploadFile?_.uploadFile.name:"",fileUploadFileDescription:_.fileDescription,fileUploadInProgressMessage:"Uploading ...",fileUploadPlaceholder:le("upload_instruction","Enter a description of this file (optional)"),fileUploadOnFileDescriptionChange:ts,fileUploadOnCancel:es,fileUploadOnConfirm:ss,endChatShow:_.isChatEndModalShown,endChatTitle:"".concat((0,a.Z)(le("close","Close"))," support chat"),endChatDescription:le("confirm_end","Are you sure you want to end this chat?"),endChatCancelLabel:le("cancel","Cancel"),endChatConfirmLabel:le("close","Close"),endChatOnCancel:ls,endChatOnConfirm:os,agents:ie,getUserAvatarComponent:e=>i.createElement(m,{avatar:je(e.id)}),chatBodyWelcome:i.createElement(f.A,{title:le("welcome","Welcome to Live Support."),showLogo:ne,description:le("instruction","Start a conversation and we'll be right with you."),showWaitingMessage:te,queuePositionMessage:le("queue_position","You're in line",String(_.queuePosition>0?_.queuePosition:"")),waitingMessage:_.waitingMessage,defaultWaitingTime:2,onWaitingProgressCompleted:Re}),chatBodyMessageList:i.createElement(C.A,{messages:_.messages,isMessageInteracted:Xe,isApp:X,onInteractionOptionClick:Ge,onTranslationClick:rs,getUserAvatarComponent:ps}),chatIndicatorShowTyping:_.typingUsers.length>0,chatIndicatorTypingMessage:gs,chatIndicatorChatId:h.showSessionId(_)&&null!==(W=_.session)&&void 0!==W&&W.id?_.session.id:null,chatIndicatorChatLabel:"Chat ID:",chatConnectionShow:!!_.socketConnectionError,chatConnectionContent:i.createElement("div",null,"Chat connection lost.",_.connectionStatus!==g._V.ReconnectFailed&&i.createElement(i.Fragment,null," Please try again later. "),_.connectionStatus===g._V.Reconnecting&&i.createElement(i.Fragment,null," Reconnecting..."),_.socketConnectionError===g.UA.InvalidCsrfToken&&i.createElement(i.Fragment,null,'Make sure third-party cookies enabled in the browser. In Chrome and other browsers\' settings - check "Allow all cookies", in Safari - uncheck "Prevent cross-site tracking" and reload the page.'),_.connectionStatus!==g._V.Reconnecting&&i.createElement("a",{className:"da-chatConnectionStatus__reload",href:"/",onClick:e=>{e.preventDefault(),window.location.reload()}}," Reload")),sendboxDisabled:!ee,sendboxPlaceholder:le("placeholder","Type your message here..."),sendboxOnMessageChange:Ye,sendboxOnMessageEnter:Ze,sendboxShowAttachmentInput:se,sendboxFileValue:_.uploadFile,sendboxOnFileChange:He,chatActionCanEnd:se,chatActionOnEnd:ds})}}}]);