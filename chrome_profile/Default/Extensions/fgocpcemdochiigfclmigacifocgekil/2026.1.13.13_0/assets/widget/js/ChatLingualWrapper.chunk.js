(window.daChatWidgetJsonpFunction=window.daChatWidgetJsonpFunction||[]).push([[210],{2652:e=>{var t=function(e){return"string"===typeof e};function a(e,a,n){var o=0,i=0;if(""===e)return e;if(!e||!t(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=a;(function(e){return e instanceof RegExp})(s)||(s=new RegExp("("+function(e){var t=/[\\^$.*+?()[\]{}|]/g,a=RegExp(t.source);return e&&a.test(e)?e.replace(t,"\\$&"):e}(s)+")","gi"));for(var l=e.split(s),r=1,c=l.length;r<c;r+=2)void 0!==l[r]&&void 0!==l[r-1]?(i=l[r].length,o+=l[r-1].length,l[r]=n(l[r],r,o),o+=i):console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");return l}e.exports=function(e,n,o){return Array.isArray(e)||(e=[e]),function(e){var t=[];return e.forEach(function(e){Array.isArray(e)?t=t.concat(e):t.push(e)}),t}(e.map(function(e){return t(e)?a(e,n,o):e}))}},17473:(e,t,a)=>{"use strict";a.d(t,{A:()=>I});var n=a(89379),o=a(62771),i=a.n(o),s=a(73021),l=a(28070),r=a(26566);a(3992);let c=function(e){return e.JustNow="JustNow",e.MinuteAgo="MinuteAgo",e.MinutesAgo="MinutesAgo",e.HourAgo="HourAgo",e.HoursAgo="HoursAgo",e}({});const d={[c.JustNow]:"Just now",[c.MinuteAgo]:"A minute ago",[c.MinutesAgo]:"minutes ago",[c.HourAgo]:"An hour ago",[c.HoursAgo]:"hours ago"};const m=e=>{let{message:t,children:a}=e;return s.createElement("div",{className:"message-info"},s.createElement("span",{className:"user"},t.messageFromName),a,s.createElement("time",{className:"datetime","data-time":t.time,title:t.time.toString()},s.createElement("span",{className:"protected"},function(e){let t,a=(new Date).getTime()-e.getTime();a=a>0?a:0;let n=Math.floor(a/36e5);if(n>=1)return t=1===n?d[c.HourAgo]:n+" "+d[c.HoursAgo],t;switch(n=Math.floor(a/6e4),n){case 0:t=d[c.JustNow];break;case 1:t=d[c.MinuteAgo];break;default:t=n+" "+d[c.MinutesAgo]}return t}(t.time))))};var u=a(69832),g=a(9978);let p=function(e){return e.OpenUrl="Action.OpenUrl",e.ShowCard="Action.ShowCard",e.Submit="Action.Submit",e}({});const h=e=>{let{card:t,hostConfig:a,disabled:n,onActionOpenUrl:o,onExecuteAction:l,onActionSubmit:r,onActionShowCard:c}=e;const d=s.useRef(null),m=(0,s.useCallback)(e=>{window.open(e.url,e.title||"_blank")},[]),u=(0,s.useCallback)(e=>{switch(e.getJsonTypeName()){case p.OpenUrl:o?o(e):m(e);break;case p.ShowCard:c&&c(e);break;case p.Submit:r&&r(e)}l&&l(e)},[o,m,c,r,l]);return(0,s.useEffect)(()=>{if(!d.current||!t)return;const e=new g.AdaptiveCard;a&&(e.hostConfig=new g.HostConfig(a)),e.onExecuteAction=u,e.parse(t),d.current.innerHTML="",e.render(d.current)},[t,a,u]),s.createElement("div",{className:"da-chat__card master"},s.createElement("div",{ref:d,className:i()({disabled:n})}))},f=e=>{let{interactionMessage:t,disabled:a,onOptionClick:n}=e;const o=(0,s.useMemo)(()=>{const e=[];t.body&&e.push({type:"TextBlock",size:"medium",text:t.body});return{type:"AdaptiveCard",version:"1.3",body:e,actions:t.interaction.data.options.map(e=>({type:"Action.Submit",title:e.label,value:e.value}))}},[t.body,t.interaction.data.options]),i=(0,s.useCallback)(e=>{const a=e.toJSON(),o=t.interaction.data.options.find(e=>e.label===a.title);n(o)},[t.interaction.data.options,n]);return s.createElement(h,{card:o,disabled:a,hostConfig:u.M8.config,onActionSubmit:i})};const b=function(e){let{message:t,isMessageInteracted:a,onInteractionOptionClick:n}=e;const o=t;return s.createElement("div",{className:"message-content interaction"},s.createElement("div",{className:i()("bubble","interaction",{interacted:a(o.id)})},s.createElement(f,{interactionMessage:o,disabled:a(o.id),onOptionClick:e=>n(o.id,e.value)})),s.createElement(m,{message:o}))};var v=a(2652),x=a.n(v);const y=/(https?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,E={image:["jpg","jpeg","tiff","png","gif","bmp"],video:["mp4","avi","mov","wmv","flv","webm","mkv"],audio:["wav","mp3","acc","aacp","ogg","flac"]},C=[["amp","&"],["apos","'"],["#x27","'"],["#x2F","/"],["#39","'"],["#47","/"],["lt","<"],["gt",">"],["nbsp"," "],["quot",'"']],w=[{regEx:/youtube:\/\/|https?:\/\/youtu\.be\/|http:\/\/y2u\.be\//,getId:e=>e.split(new RegExp(/youtube:\/\/|https?:\/\/youtu\.be\/|http:\/\/y2u\.be\//,"g"))[1]},{regEx:/\/v\/|\/vi\//,getId:e=>e.split(new RegExp(/\/v\/|\/vi\//,"g"))[1]},{regEx:/v=|vi=/,getId:e=>e.split(new RegExp(/v=|vi=/,"g"))[1].split("&")[0]},{regEx:/\/an_webp\//,getId:e=>e.split(new RegExp(/\/an_webp\//,"g"))[1]},{regEx:/\/embed\//,getId:e=>e.split(new RegExp(/\/embed\//,"g"))[1]}];const k=function(e){let{messageBody:t,isApp:a,fileName:n}=e;const o=(0,s.useCallback)(()=>{const e="undefined"!==typeof document.createElement("video").canPlayType,t="undefined"!==typeof window.Audio;return e&&t},[]),i=(0,s.useCallback)(e=>C.reduce((e,t)=>e.replace(new RegExp("&"+t[0]+";","g"),t[1]),e),[]),l=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!(arguments.length>1?arguments[1]:void 0).find(t=>t.toLocaleLowerCase()===e.toLocaleLowerCase())},[]),r=(0,s.useCallback)(e=>{const t=(e=e.split("?")[0]).split(".");return 1===t.length?"":t[t.length-1].toLowerCase()},[]),c=(0,s.useCallback)(e=>y.test(e),[]),d=(0,s.useCallback)((e,t)=>l(t||r(e),E.image),[r,l]),m=(0,s.useCallback)((e,t)=>l(t||r(e),E.video),[r,l]),u=(0,s.useCallback)((e,t)=>l(t||r(e),E.audio),[r,l]),g=(0,s.useCallback)(e=>c(e)&&!!w.some(t=>t.regEx.test(e)),[c]),p=(0,s.useCallback)(e=>{const t=w.find(t=>new RegExp(t.regEx,"g").test(e.replace(/#t=.*$/,"")));return t?(a=t.getId(e)).indexOf("?")>-1?a.split("?")[0]:a.indexOf("/")>-1?a.split("/")[0]:a.indexOf("&")>-1?a.split("&")[0]:a:null;var a},[]),h=(0,s.useCallback)(e=>"string"!==typeof e?"":e.substring(e.lastIndexOf("/")+1).split("?")[0],[]),f=(0,s.useCallback)(e=>{if("string"!==typeof e)return"";const t=e.split(".");return t.length<2?"":t[t.length-1]},[]),b=(0,s.useCallback)(e=>"string"===typeof n?n:h(e),[n,h]),v=(0,s.useCallback)(e=>{const t=b(e);return t||e},[b]),k=(0,s.useMemo)(()=>{const e=f(n);if(Object.keys(E).some(t=>E[t].find(t=>t===e)))return e},[n,f]),N=(0,s.useMemo)(()=>x()(i(t),y,(e,t)=>s.createElement("div",{key:t,className:"preview-media"},!o()&&s.createElement("a",{href:e,download:b(e)},h(e))||d(e,k)&&s.createElement("a",Object.assign({href:e},a?{download:b(e)}:{target:"_blank",rel:"noopener noreferrer"}),s.createElement("img",{src:e,alt:e}))||m(e)&&!a&&s.createElement("video",{src:e,controls:!0})||g(e)&&s.createElement("iframe",{src:"https://www.youtube.com/embed/".concat(p(e)),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})||u(e)&&!a&&s.createElement("audio",{src:e,controls:!0})||s.createElement("a",Object.assign({href:e},a&&b(e)?{download:b(e)}:{target:"_blank",rel:"noopener noreferrer"}),v(e)))),[i,k,b,h,v,p,a,u,o,d,m,g,t]);return s.createElement("div",{className:"preview"},N)},N=r.Y.getInstance();const A=function(e){let{message:t,onTranslationClick:a,isApp:n}=e;const o=t;return s.createElement("div",{className:"message-content"},s.createElement("div",{className:"bubble"},s.createElement("div",{className:"text"},s.createElement(k,{isApp:n,messageBody:o.body,fileName:o.fileName}),N.shouldShowTranslation(o)&&s.createElement("div",{className:"translation"},s.createElement("bdi",{dangerouslySetInnerHTML:{__html:o.translation}}))),N.shouldShowAlternativeTranslation(o)&&s.createElement("div",{onClick:e=>a(o),className:"alternate message-alt-translate"},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14px",viewBox:"0 0 24 24",width:"14px",fill:"#000000"},s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),s.createElement("path",{fill:"#3eaab0",d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})))),s.createElement(m,{message:o},o.messageFromLanguage&&s.createElement("span",{className:"language"},o.messageFromLanguage)))},_=r.Y.getInstance();const S=function(e){return s.createElement(s.Fragment,null,!_.isInteractionMessage(e.message)&&s.createElement(A,{isApp:e.isApp,message:e.message,onTranslationClick:e.onTranslationClick}),_.isInteractionMessage(e.message)&&s.createElement(b,{message:e.message,isMessageInteracted:e.isMessageInteracted,onInteractionOptionClick:e.onInteractionOptionClick}))},I=e=>{let{messages:t,isMessageInteracted:a,isApp:o,onInteractionOptionClick:r,onTranslationClick:c,getUserAvatarComponent:d}=e;const{getFirstAndLastName:m}=(0,l.wr)();return s.createElement(s.Fragment,null,t.map(e=>s.createElement("div",{key:e.id,className:i()("cl-chat-message-group",{self:e.isCurrentUser})},s.createElement("div",{className:"cl-chat-message da-chatMessage"},s.createElement("div",{className:"da-chatMessage__figure"},d((0,n.A)({id:e.from.id},m(e.messageFromName)),e)),s.createElement(S,{message:e,isApp:o,isMessageInteracted:a,onInteractionOptionClick:r,onTranslationClick:c})))))}},28070:(e,t,a)=>{"use strict";a.d(t,{Nx:()=>p,v9:()=>g,wr:()=>h,NC:()=>f});var n=a(73021),o=a(69832);class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}isFirefox(){return/firefox/i.test(navigator.userAgent)}isDocumentHidden(){const e=this.getHiddenProp();return!!e&&document[e]}getHiddenProp(){const e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(let t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}}i.instance=void 0;var s=a(26566);class l{constructor(){this.titleBlinkInterval=null,this.docTitles={original:"",notified:""}}static getInstance(){return l.instance||(l.instance=new l),l.instance}async requestPermission(){return Notification.requestPermission()}supportNotifications(){return"Notification"in window}createNotification(e,t){return new Notification(e,t)}addEvent(e,t,a){if(t.match(" "))for(var n=t.split(" "),o=0;o<n.length;o++)this.addEvent(e,n[o],a);if(e.addEventListener)e.removeEventListener(t,a,!1),e.addEventListener(t,a,!1);else{const n=e;n.detachEvent("on"+t,a),n.attachEvent("on"+t,a)}}blinkDocTitle(e,t){this.docTitles.original||(this.docTitles.original=window.top.document.title),this.docTitles.notified=e,this.titleBlinkInterval||(this.titleBlinkInterval=setInterval(()=>{this.docTitles.original!==window.top.document.title&&this.docTitles.notified!==window.top.document.title&&(this.docTitles.original=window.top.document.title),window.top.document.title=window.top.document.title===this.docTitles.original?this.docTitles.notified:this.docTitles.original},1e3),t&&this.addEvent(window,"focus scroll click",()=>{this.stopBlinkDocTitle()}))}stopBlinkDocTitle(){this.docTitles.original&&(this.titleBlinkInterval&&(clearInterval(this.titleBlinkInterval),this.titleBlinkInterval=null),window.top.document.title=this.docTitles.original,this.docTitles={original:"",notified:""})}async sendNotification(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.supportNotifications()){if("granted"===await this.requestPermission())return this.createNotification(e,t)}return null}}l.instance=void 0;var r=a(74393);var c=a(78177);const d=i.getInstance(),m=s.Y.getInstance(),u=l.getInstance(),g=()=>{const{play:e}=(e=>{const t=(0,n.useRef)(new Audio),a=(0,n.useMemo)(()=>e===r.CZ.ChimeSound?r.cj.chime:"",[e]);(0,n.useEffect)(()=>{if(a&&t.current){const e=t.current.getAttribute("src");t.current.setAttribute("src",a),e!==a&&t.current.load()}},[a]);const o=(0,n.useCallback)(()=>{t.current&&(t.current.pause(),t.current.currentTime=0)},[]);return{play:(0,n.useCallback)(()=>{t.current&&(o(),setTimeout(()=>{t.current.play()},500))},[o]),stop:o}})(r.CZ.ChimeSound),{onAnyMessage:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const t=(0,n.useCallback)(t=>{const{userLiveAgentSession:{session:a}}=c.i.getState(),n=null===a||void 0===a?void 0:a.sessionId;0!==t.length&&d.isDocumentHidden()&&n&&t.forEach(t=>{const a=m.getMessageTextOrDefault(t,"Unread messages"),n=t.messageFromName,o="".concat(n,": ").concat(a);u.sendNotification(o,{icon:"".concat( document.querySelector('script[src*="delaney-widget.js"]') && document.querySelector('script[src*="delaney-widget.js"]').src && document.querySelector('script[src*="delaney-widget.js"]').src.slice(0, document.querySelector('script[src*="delaney-widget.js"]').src.indexOf('/js/')) ,"/img/cl-notification-icon.gif"),lang:"en"}).then(e=>{e&&(e.onclick=()=>window.focus())}),/firefox/i.test(navigator.userAgent)||e(),u.blinkDocTitle(o,!0)})},[e]);return{onAnyMessage:(0,n.useCallback)(e=>{const a=e.filter(e=>!e.isCurrentUser);setTimeout(()=>{t(a)},1e3)},[t])}}(e);return{onAnyMessage:t}},p=function(e,t){((e,t,a)=>{(0,n.useEffect)(()=>{const e=setTimeout(()=>{t&&(t.scrollTop=t.scrollHeight)},a);return()=>{clearTimeout(e)}},[e,t,a]),(0,n.useEffect)(()=>{if(!t)return;let e=null;const n=()=>{e&&clearTimeout(e),e=setTimeout(()=>{t.scrollTop=t.scrollHeight},a)};return window.addEventListener("resize",n),()=>{e&&clearTimeout(e),window.removeEventListener("resize",n)}},[t,a])})(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:500)},h=e=>{const t=(0,n.useCallback)(e=>e?e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):e.firstName&&!e.lastName?e.firstName:!e.firstName&&e.lastName?e.lastName:"":"",[]),a=(0,n.useCallback)(e=>{if(!e)return{firstName:"",lastName:""};const t=e.split(" ");return 1===t.length?{firstName:t[0],lastName:""}:{firstName:t[0],lastName:t[1]}},[]),o=(0,n.useCallback)(e=>e.split(" ").map(e=>e.charAt(0).toUpperCase()).join(""),[]);return(0,n.useMemo)(()=>{const n=t(e);return{fullName:n,initials:o(n),getFullName:t,getInitials:o,getFirstAndLastName:a}},[a,t,o,e])},f=(e,t)=>(0,n.useMemo)(()=>{if(!Array.isArray(t))return[];const a=s.Y.getInstance();return t.filter(e=>e.status===o.M2.Active).map(t=>({name:t.name,apiKey:a.resolveDepartmentApiKey(t,e)}))},[t,e])},42725:(e,t,a)=>{(e.exports=a(58403)(!1)).push([e.id,'.cl-attachment-file{display:none}.cl-outreach-messages{bottom:110px;display:none;position:fixed;right:45px;width:280px}.cl-outreach-messages .cl-outreach-close{align-items:center;background:#5c6266;border-radius:50%;color:#fff;cursor:pointer;display:flex;font-size:14px;height:24px;justify-content:center;opacity:0;margin-bottom:8px;margin-left:auto;transition:.1s ease;width:24px}.cl-outreach-messages .cl-outreach-close:hover{opacity:.9}.cl-outreach-messages:hover .cl-outreach-close{opacity:.75}.cl-outreach-messages.fade-in .cl-outreach-message{animation:.2s ease 0 fade-in,.2s ease 3s reveal;animation-fill-mode:forwards;animation-iteration-count:1}.cl-outreach-messages.fade-in .cl-outreach-input{animation:fade-in,reveal;animation-duration:.2s;animation-timing-function:ease;animation-fill-mode:forwards;animation-delay:3s}.cl-outreach-messages.disappearing{animation:disappear;animation-duration:.1s;animation-timing-function:ease-out;animation-fill-mode:forwards}.cl-outreach-message{background:#f4f4f5;border:1px solid rgba(0,0,0,0);border-radius:4px;box-sizing:border-box;color:#899097;font-size:12px;line-height:18px;opacity:0;padding:20px;transform:translateY(48px);width:100%}.cl-outreach-input{align-items:center;cursor:pointer;display:flex;margin-top:8px;opacity:0;position:relative;width:100%}.cl-outreach-input textarea{border:1px solid rgba(0,0,0,0);border-radius:4px;box-sizing:content-box;color:#3c434a;font-family:"Noto Sans",sans-serif;font-size:12px;line-height:1.4em;min-height:1.4em;outline:none;padding:12px 20px;padding-right:38px;resize:none;transition:.1s ease;width:100%}.cl-outreach-input textarea:not(:focus){cursor:pointer}.cl-outreach-input textarea:focus{border-color:#53565a}.cl-outreach-input .material-icons{align-items:center;color:#53565a;cursor:pointer;display:flex;font-size:14px;height:100%;opacity:0;position:absolute;right:12px;top:0;transition:.1s ease}.cl-outreach-input.has-value .material-icons{opacity:1}.cl-outreach-input.is-focused:not(.has-value) .material-icons{opacity:.6}.cl-outreach-input.is-sending textarea{background:#f4f4f5;cursor:default}.cl-outreach-input.is-sending .material-icons{animation:sending;animation-duration:.75s;animation-iteration-count:infinite;animation-timing-function:ease-in-out}.da-chatLingualWait{min-height:100px}.da-chatLingualWait+.cl-chat-messages{overflow:auto !important;margin-top:auto;max-height:100%}.da-chatLingualWait .da-header__logoMain{font-size:29.5px;font-weight:700}.da-chatLingualWait .da-header__logoMain:after{content:".";color:#86bc25}.cl-chat-messages{scroll-behavior:smooth;overflow:hidden;padding-top:20px;position:relative;text-overflow:ellipsis}.cl-chat-messages:empty{flex:1 1 10%;font-size:12px;margin:25px;margin-top:20%;text-align:left}.cl-chat-messages:empty::after{color:#3c434a;font-weight:bold;opacity:.71}.cl-chat-messages:empty:after{color:#3c434a;font-weight:bold;opacity:.71}.cl-chat-messages:empty::before{background-repeat:no-repeat;background-size:contain;content:"";display:block;height:30px;margin-bottom:15px}.cl-chat-messages:empty:before{background-repeat:no-repeat;background-size:contain;content:"";display:block;height:30px;margin-bottom:15px}.cl-chat-messages .cl-chat-message-divider{border-bottom:1px solid #efefef;font-size:12px;margin:0 25px;opacity:.85;padding:0 35px;padding-bottom:25px;text-align:center}.cl-chat-messages.same-language .message-info>.language{display:none}.cl-chat-message{color:#3c434a;display:flex;position:relative;transition:.2s opacity ease .2s}.cl-chat-message .alternate{border-radius:3px;cursor:pointer;line-height:1;transition:all .15s ease 0s;z-index:1}.cl-chat-message .alternate:hover{background-color:#f8f9fa}.cl-chat-message .alternate:hover i{opacity:.7}.cl-chat-message .alternate:active{background-image:linear-gradient(rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0.02))}.cl-chat-message .alternate i{color:#3eaab0;font-size:14px;opacity:.7;padding:7px}.cl-chat-message .alternate.only-link{display:none}.cl-chat-message .alternate.link-first{top:60px}.cl-chat-message .message-info{color:#3c434a;font-size:12px;font-feature-settings:"smcp";font-variant:small-caps;letter-spacing:1.45px;opacity:.55;padding-bottom:7px;text-transform:lowercase}.cl-chat-message .message-info .protected{font-size:12px}.cl-chat-message .message-info .protected:after{content:" "}.cl-chat-message .message-info>*:not(:last-child)::after{content:" \u2022 ";font-size:10px}.cl-chat-message:not(:first-child) .message-info{display:none}.cl-chat-message:last-child{padding-bottom:25px}.cl-chat-message .message-content .text{background-color:#f8f9fa;border-radius:5px;font-size:12px;line-height:16px;max-width:200px;padding:15px 20px;position:relative;white-space:pre-wrap}.cl-chat-message .message-content .text a{cursor:pointer;color:#00a3e0}.cl-chat-message .primary{opacity:.85}.cl-chat-message .primary .cl-link{background-color:#fff;border:1px solid #dbe1e5;border-radius:3px;color:#26890d;display:block;font-size:12px;margin:10px 0px 8px;overflow:hidden;padding:15px 20px;text-decoration:none;text-overflow:ellipsis;transition:border-color .5s ease .1s,box-shadow .5s ease .1s;white-space:nowrap}.cl-chat-message .primary .cl-link>a{color:#26890d;font-size:12px;overflow:hidden;text-decoration:none;text-overflow:ellipsis}.cl-chat-message .primary .cl-link:not(.cl-link-url):before{color:#26890d;direction:ltr;display:inline-block;font-family:"Material Icons";font-feature-settings:"liga";font-size:14px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:grayscale;font-style:normal;font-weight:normal;letter-spacing:normal;line-height:1;padding-bottom:2px;padding-right:8px;text-transform:none;vertical-align:middle;white-space:normal;word-wrap:normal}.cl-chat-message .primary .cl-link:not(.cl-link-url)::before{color:#26890d;direction:ltr;display:inline-block;font-family:"Material Icons";font-feature-settings:"liga";font-size:14px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:grayscale;font-style:normal;font-weight:normal;letter-spacing:normal;line-height:1;padding-bottom:2px;padding-right:8px;text-transform:none;vertical-align:middle;white-space:normal;word-wrap:normal}.cl-chat-message .primary .cl-link:hover{border-color:#26890d;box-shadow:0px 0px 1px #26890d;transition:border-color .5s ease 0s,box-shadow .5s ease 0s}.cl-chat-message .primary .cl-link.img{cursor:zoom-in}.cl-chat-message .primary .cl-link.img>a{cursor:zoom-in}.cl-chat-message .primary .cl-link-url .cl-title::before{color:#26890d;direction:ltr;display:inline-block;font-family:"Material Icons";font-feature-settings:"liga";font-size:14px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:grayscale;font-style:normal;font-weight:normal;letter-spacing:normal;line-height:1;padding-bottom:2px;padding-right:8px;text-transform:none;vertical-align:middle;white-space:normal;word-wrap:normal;content:"link"}.cl-chat-message .primary .cl-link-url .cl-title{display:block;overflow:hidden;text-overflow:ellipsis}.cl-chat-message .primary .cl-link-url .cl-title:before{content:"link"}.cl-chat-message .primary .cl-link-url{display:block}.cl-chat-message .primary .cl-link-url:not([data-loading]).audio:not(.video) .cl-thumbnail>audio{display:block}.cl-chat-message .primary .cl-link-url:not([data-loading]).video .cl-thumbnail>video{display:block}.cl-chat-message .primary .cl-link-url:not([data-loading]).img .cl-thumbnail>img{display:block}.cl-chat-message .primary .cl-link-url:not([data-loading]).yt .cl-thumbnail>.cl-yt-video{display:block}.cl-chat-message .primary .cl-link-email:before{content:"email"}.cl-chat-message .primary .cl-link-email::before{content:"email"}.cl-chat-message .primary .cl-link-phone:before{content:"phone"}.cl-chat-message .primary .cl-link-phone::before{content:"phone"}.cl-chat-message .primary .cl-link-url.audio:not([data-loading]){padding:5px 6px}.cl-chat-message .primary .cl-link-url.audio:not([data-loading]) .cl-title{padding:5px 9px 5px 12px}.cl-chat-message .primary .cl-link-url.audio:not([data-loading]) .cl-title:before{content:"audiotrack"}.cl-chat-message .primary .cl-link-url.audio:not([data-loading]) .cl-title::before{content:"audiotrack"}.cl-chat-message .primary .cl-link-url.video:not([data-loading]){padding:5px 6px}.cl-chat-message .primary .cl-link-url.video:not([data-loading]) .cl-title{padding:5px 9px 5px 12px}.cl-chat-message .primary .cl-link-url.video:not([data-loading]) .cl-title:before{content:"videocam"}.cl-chat-message .primary .cl-link-url.video:not([data-loading]) .cl-title::before{content:"videocam"}.cl-chat-message .primary .cl-link-url.yt:not([data-loading]){padding:5px 6px}.cl-chat-message .primary .cl-link-url.yt:not([data-loading]) .cl-title{padding:5px 9px 5px 12px}.cl-chat-message .primary .cl-link-url.yt:not([data-loading]) .cl-title:before{content:"videocam"}.cl-chat-message .primary .cl-link-url.yt:not([data-loading]) .cl-title::before{content:"videocam"}.cl-chat-message .primary .cl-link-url.img:not([data-loading]){padding:5px 6px}.cl-chat-message .primary .cl-link-url.img:not([data-loading]) .cl-title{padding:5px 9px 5px 12px}.cl-chat-message .primary .cl-link-url.img:not([data-loading]) .cl-title:before{content:"image"}.cl-chat-message .primary .cl-link-url.img:not([data-loading]) .cl-title::before{content:"image"}.cl-chat-message .primary .preview-media{margin-top:5px;margin-bottom:5px}.cl-chat-message .primary .preview-media a{cursor:pointer}.cl-chat-message .primary .preview-media audio{min-width:250px;min-height:50px}.cl-chat-message .bubble{display:flex;min-width:100%}.cl-chat-message .bubble.interaction{flex-direction:column}.cl-chat-message .interaction{border-radius:5px}.cl-chat-message .interaction .da-chat__card{max-width:480px;min-width:250px;transition-duration:0s;transition-property:max-width,min-width}.cl-chat-message .interaction .da-chat__card .ac-container.ac-adaptiveCard{background:#000 !important;border-radius:10px 10px 10px 0;font-size:13px !important}.cl-chat-message .interaction .da-chat__card .ac-container.ac-adaptiveCard .ac-textBlock{font-family:"Open Sans",sans-serif !important;line-height:1.3 !important;color:#fff !important;font-size:13px !important}.cl-chat-message .interaction .da-chat__card .ac-container.ac-adaptiveCard .ac-pushButton{display:inline-block !important;color:#000 !important;min-height:38px;overflow:inherit;font-weight:600;font-family:"Open Sans",sans-serif;font-size:13px}.cl-chat-message .interaction .da-chat__card .ac-container.ac-adaptiveCard .ac-selectable .ac-textBlock{font-size:15px !important;color:#00a3e0 !important;cursor:pointer}.cl-chat-message .interaction>.tile-container{max-width:480px;background-color:inherit;margin-top:10px;display:flex;flex-basis:100%;justify-content:stretch}.cl-chat-message .interaction>.tile-container>.tile{align-items:center;background-color:#181818;color:#fff;border:1px solid #f4f4f5;border-radius:5px;cursor:pointer;display:flex;flex-direction:column;flex-wrap:wrap;font-size:10px;justify-content:space-around;outline:none;padding:10px;text-align:center;transition:border-color .5s ease 0s}.cl-chat-message .interaction>.tile-container>.tile:not(:last-child){margin-right:5px}.cl-chat-message .interaction>.tile-container>.tile:not(.interacted):not(:disabled):hover{border-color:#26890d;box-shadow:0px 0px 1px #26890d}.cl-chat-message .interaction>.tile-container>.tile>i{color:#26890d;font-size:28px;margin-bottom:7px;opacity:.8}.cl-chat-message .interaction>.tile-container>.tile:hover>i{opacity:1}.cl-chat-message .interaction>.tile-container>.tile>span{max-width:100%}.cl-chat-message .interaction>.tile-container>.tile.interacted{border-color:#26890d;color:#26890d}.cl-chat-message .interaction>.tile-container>.tile.interacted>i{opacity:1}.cl-chat-message .interaction[cl-interaction-type=options]{background-color:#fff}.cl-chat-message .interaction[cl-interaction-type=options]>.tile-container{flex-wrap:wrap;margin:0}.cl-chat-message .interaction[cl-interaction-type=options]>.tile-container>.tile{border-color:#26890d;color:#26890d;flex-basis:unset;flex-direction:row;margin:0 6px 6px 0;transition:background-color .5s ease 0s}.cl-chat-message .cl-thumbnail{line-height:0px;max-height:100%;max-width:100%}.cl-chat-message .cl-thumbnail>audio{display:none;margin-bottom:8px;max-height:100%;max-width:100%}.cl-chat-message .cl-thumbnail>video{display:none;margin-bottom:8px;max-height:100%;max-width:100%}.cl-chat-message .cl-thumbnail>.cl-yt-video{display:none;margin-bottom:8px;max-height:100%;max-width:100%;height:100%;width:100%}.cl-chat-message .cl-thumbnail>img{display:none;margin-bottom:8px;max-height:100%;max-width:100%;height:100%;width:100%}.cl-chat-message .translation{font-size:10px;overflow:hidden;padding-top:4px;transition:all .5s ease 0s}.cl-chat-message .translation bdi{opacity:.5}.cl-chat-message .translation.expandable{cursor:pointer}.cl-chat-message-group{margin:0 10px}.cl-chat-message-group:last-child{margin-bottom:10px}.cl-chat-message-group .cl-chat-message:not(:last-child){margin-bottom:10px}.cl-chat-message-group .cl-chat-message:not(:last-child) .message-avatar{opacity:0;transition:opacity .25s ease 0s}.cl-chat-message-group .message-avatar{align-self:flex-end;border-radius:3px;bottom:0;content:"";display:flex;flex-shrink:0;height:25px;justify-content:center;left:0;margin-bottom:2px;margin-right:10px;overflow:hidden;width:25px}.cl-chat-message-group .message-avatar img{border-radius:3px;margin:auto;max-height:100%;max-width:100%}.cl-chat-message-group .message-avatar .material-icons{font-size:16px;color:#fff;opacity:.5}.cl-chat-message-group .message-alt-translate{align-self:center;border-radius:3px;flex-shrink:0;height:25px}.cl-chat-message-group.self .cl-chat-message .message-content{margin-left:auto;align-items:flex-end;display:flex;flex-direction:column}.cl-chat-message-group.self .cl-chat-message .message-content .bubble{justify-content:flex-end;background:none}.cl-chat-message-group.self .cl-chat-message .message-content .not-delivered{align-items:center;color:#dd5989;display:flex;font-size:12px;margin:6px 0}.cl-chat-message-group.self .cl-chat-message .message-content .not-delivered .material-icons{font-size:16px;margin-right:4px}.cl-chat-message-group.self .cl-chat-message .message-content .preview{white-space:pre-line}.cl-chat-message-group.self .cl-chat-message:first-child .message-info{opacity:.28}.cl-chat-message-group.self .translation bdi{opacity:.28}.cl-modal-titlebar i{border-radius:3px;color:#899097;font-size:14px;font-weight:bold;opacity:1;padding:7px;transition:all .25s ease 0s;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.cl-modal-titlebar i:hover{background-color:#26890d;color:#fff;cursor:pointer;opacity:1}.cl-modal-titlebar i.close:hover{background:#dd5989}.cl-modal-titlebar{align-items:center;background-color:#fff;border-bottom:1px solid #f4f4f5;border-top-left-radius:5px;border-top-right-radius:5px;box-sizing:border-box;color:#899097;display:flex;flex-direction:row-reverse;flex-shrink:0;height:60px;padding:0 18px;width:100%}.cl-modal i:hover{background-color:#26890d;color:#fff;cursor:pointer;opacity:1}.cl-modal{background-color:rgba(0,0,0,.25);border-top-left-radius:5px;border-top-right-radius:5px;bottom:0;box-sizing:border-box;opacity:0;position:absolute;top:0;transition:opacity .25s ease-in-out,z-index .25s ease-in-out;width:100%;z-index:-1}.cl-modal *{box-sizing:border-box}.cl-modal .modal-content{background-color:#fff;border:none;border-radius:0;box-shadow:0px 3px 8px -1px rgba(0,0,0,.15);padding:10px 40px}.cl-modal .modal-content .menu-row{align-items:center;display:flex;-ms-flex-pack:justify;height:75px;justify-content:space-between}.cl-modal .modal-content .menu-row:not(:last-child){border-bottom:1px solid #efefef}.cl-modal .modal-content .menu-row>span{font-size:14px;margin-bottom:10px}.cl-modal button:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.cl-modal.shown{opacity:1;z-index:2000}.cl-end-message{font-size:14px;letter-spacing:1px;margin-top:20px;padding:0px 30px}.cl-end-time{color:#dbe1e5;opacity:.5;padding-right:3px}.cl-centered{text-align:center}.cl-hide{display:none !important}.cl-shrink{max-height:0px}.cl-survey-description{font-weight:bold;font-size:18px;padding:0 25px 15px 25px}.material-icons{direction:ltr;display:inline-block;font-family:"Material Icons";font-feature-settings:"liga";font-size:24px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:grayscale;font-style:normal;font-weight:normal;letter-spacing:normal;line-height:1;text-transform:none;vertical-align:middle;white-space:normal;word-wrap:normal}@media(max-device-width: 600px){.cl-chat-message .message-info{font-size:13px}.cl-chat-message .translation{font-size:13px}.cl-chat-message .primary{font-size:13px}.cl-chat-message .primary .cl-link{font-size:13px}.cl-chat-message .primary .cl-link:before{font-size:19px}.cl-chat-message .primary .cl-link::before{font-size:19px}.cl-chat-message .alternate i{font-size:19px}.cl-chat-messages:empty{font-size:16px}.cl-modal-titlebar i{font-size:21px}}@media(max-device-width: 768px)and (orientation: landscape){.cl-chat-message .message-info{font-size:14px}.cl-chat-message .translation{font-size:14px}.cl-chat-message .primary{font-size:16px}.cl-chat-message .primary .cl-link{font-size:15px}.cl-chat-message .primary .cl-link:before{font-size:19px}.cl-chat-message .primary .cl-link::before{font-size:19px}.cl-chat-message .alternate i{font-size:19px}.cl-chat-messages:empty{font-size:16px}}',""])},48340:(e,t,a)=>{"use strict";a.d(t,{KA:()=>i,Kc:()=>l,MW:()=>s,dm:()=>o});var n=a(89379);let o=function(e){return e.Information="Information",e.Warning="Warning",e.Error="Error",e.Critical="Critical",e}({}),i=function(e){return e.CreateSession="CreateSession",e.ErrorCreateSession="CreateSession",e.RestoredSession="RestoredSession",e.ErrorGetSessionQueues="ErrorGetSessionQueues",e.CreateChatLingualUser="CreateChatLingualUser",e.ErrorCreateChatLingualUser="ErrorCreateChatLingualUser",e.ErrorGetCsrfToken="ErrorGetCsrfToken",e.JoinSession="JoinSession",e.ConnectedToSocket="ConnectedToSocket",e.ChangedSessionStatus="ChangedSessionStatus",e.JoinAgent="JoinAgent",e.PartAgent="PartAgent",e.ReconnectToSocket="ReconnectToSocket",e.ReconnectingToSocket="ReconnectingToSocket",e.ReconnectingToSocketFailed="ReconnectingToSocketFailed",e.Closed="Closed",e.Disconnect="Disconnect",e.ErrorSocket="ErrorSocket",e.ErrorAlternativeTranslation="ErrorAlternativeTranslation",e}({}),s=function(e){return e.CreateSession="Create session",e.ErrorCreateSession="Error create session",e.CreateChatLingualUser="Create ChatLingual user",e.ErrorCreateChatLingualUser="Error create ChatLingual user",e.ErrorGetCsrfToken="Error get CsrfToken",e.ErrorGetSessionQueues="Error get session queues",e.RestoredSession="Restored session",e.JoinSession="Join session",e.ConnectedToSocket="Connected to socket",e.ChangedSessionStatus="Changed session status",e.JoinAgent="Join agent",e.PartAgent="Part agent",e.ReconnectToSocket="Reconnect to socket",e.ReconnectingToSocket="Reconnecting to socket",e.ReconnectToSocketFailed="Reconnect to socket failed",e.Closed="Closed",e.Disconnect="Disconnect",e.ErrorSocket="Error socket",e.ErrorAlternativeTranslation="Error alternative translation",e}({});class l{constructor(e,t){this.apiFetch=e,this.widgetStore=t}sendInformationEvent(e,t){this.sendEvent(e,t,o.Information)}sendWarningEvent(e,t){this.sendEvent(e,t,o.Warning)}sendErrorEvent(e,t){this.sendEvent(e,t,o.Error)}sendCriticalEvent(e,t){this.sendEvent(e,t,o.Critical)}sendEvent(e,t,a){const{conversation:{conversationId:o}}=this.widgetStore.getState(),i={level:a,message:e,properties:(0,n.A)((0,n.A)({},t),{},{conversationId:o})};this.apiFetch("logging/log",{body:JSON.stringify(i),method:"POST"})}}},49477:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(73021),o=a(62771),i=a.n(o);const s=e=>{let{mins:t,active:a,onCompleted:o}=e;const[s,l]=(0,n.useState)(0),r=(0,n.useCallback)(e=>e>=100,[]);return(0,n.useEffect)(()=>{if(!a)return;const e=setInterval(()=>{l(a=>r(a)?(clearInterval(e),0):a+100/(60*t))},1e3);return()=>{clearInterval(e)}},[a,t,o,r]),(0,n.useEffect)(()=>{r(s)&&o()},[s,o,r]),a?n.createElement("div",{className:i()("da-chatProgress",{"da-chatProgress--infinite":!s})},n.createElement("div",{className:"da-chatProgress__line",style:{width:s+"%"}})):null},l=e=>{let{title:t,description:a,showLogo:o,showWaitingMessage:i,queuePositionMessage:l,waitingMessage:r,defaultWaitingTime:c,onWaitingProgressCompleted:d=()=>{}}=e;return o||i?n.createElement("div",{className:"da-chatLingualWait"},o&&n.createElement("div",{className:"da-chatLingualWait__inner"},n.createElement("span",{className:"da-header__logoMain"},"Deloitte"),n.createElement("p",null,t),a&&n.createElement("p",{dangerouslySetInnerHTML:{__html:a}})),i&&n.createElement("div",{className:"da-chatLingualWait__inner"},n.createElement("div",{className:"da-chatLingualWait__q-message"},n.createElement("div",{className:"da-chatLingualWait__position"},l),n.createElement("div",{className:"da-chatLingualWait__time"},r)),"number"===typeof c&&n.createElement(s,{active:!0,mins:c,onCompleted:d}))):null}},52271:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=e=>e.charAt(0).toUpperCase()+e.slice(1)},56076:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var n=a(73021);const o=(0,n.forwardRef)((e,t)=>{let{welcome:a,messageList:o}=e;return n.createElement("div",{className:"live-chat-body"},a,n.createElement("div",{className:"live-chat-body__filler"}),n.createElement("div",{className:"cl-chat-messages",ref:t},o))});o.displayName="ChatBody";const i=o,s=e=>{let{show:t,messageContent:a}=e;return t?n.createElement("div",{className:"da-chatConnectionStatus"},a):null},l=e=>{let{show:t,title:a,description:o,cancelLabel:i,confirmLabel:s,onCancel:l,onConfirm:r}=e;return t?n.createElement("div",{className:"da-modal"},n.createElement("div",{className:"da-modal__inner"},n.createElement("div",{className:"da-modalHeader"},n.createElement("h2",{className:"da-modalHeader__title"},a),n.createElement("button",{"aria-label":a,onClick:l,className:"da-modalHeader__close"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 32 32"},n.createElement("path",{d:"M16.94 16l6.867-6.86a.666.666 0 0 0-.94-.94L16 15.06 9.14 8.193a.666.666 0 0 0-.94.94L15.06 16l-6.867 6.86a.666.666 0 1 0 .939.939l6.867-6.86 6.86 6.867a.666.666 0 0 0 .94-.94l-6.86-6.867z"})))),n.createElement("div",{className:"da-modalBody"},n.createElement("div",{className:"da-modalBody__text"},o)),n.createElement("div",{className:"da-modalFooter"},n.createElement("button",{className:"da-modalFooter__button o-button o-button--secondary",onClick:l,value:"false"},i),n.createElement("button",{className:"da-modalFooter__button o-button",onClick:r,value:"true"},s)))):null};var r=a(28070);const c=e=>{let{agents:t,getUserAvatarComponent:a}=e;const{getFullName:o}=(0,r.wr)();return n.createElement("div",{className:"da-chatAgent"},t.map(e=>n.createElement("div",{key:e.id?e.id:o(e),className:"da-chatAgent__item"},n.createElement("div",{className:"da-chatAgent__figure"},a(e)),n.createElement("div",{className:"da-chatAgent__info"},n.createElement("div",{className:"da-chatAgent__name"},o(e)),e.id&&n.createElement("span",{className:"da-chatAgent__id"},"ID: ",e.id)))))},d=e=>{let{show:t,title:a,fileName:o,cancelLabel:i,confirmLabel:s,isInProgress:l,uploadPlaceholder:r,inProgressMessage:c,fileDescription:d,onFileDescriptionChange:m,onCancel:u,onConfirm:g}=e;return t?n.createElement("div",{className:"da-modal"},n.createElement("div",{className:"da-modal__inner"},n.createElement("div",{className:"da-modalHeader"},n.createElement("h2",{className:"da-modalHeader__title"},a,"  "),n.createElement("button",{"aria-label":a,disabled:l,onClick:u,className:"da-modalHeader__close"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 32 32"},n.createElement("path",{d:"M16.94 16l6.867-6.86a.666.666 0 0 0-.94-.94L16 15.06 9.14 8.193a.666.666 0 0 0-.94.94L15.06 16l-6.867 6.86a.666.666 0 1 0 .939.939l6.867-6.86 6.86 6.867a.666.666 0 0 0 .94-.94l-6.86-6.867z"})))),n.createElement("div",{className:"da-modalBody"},n.createElement("div",{className:"da-modalBody__text"},n.createElement("div",{className:"da-uploadFileName"},o)),n.createElement("textarea",{disabled:l,value:d,onChange:e=>m(e.target.value),className:"da-modalBody__textarea",placeholder:r,rows:2}),l&&n.createElement("div",{className:"da-modalBody__text"},c)),n.createElement("div",{className:"da-modalFooter"},n.createElement("button",{disabled:l,className:"da-modalFooter__button o-button o-button--secondary",onClick:u},i),n.createElement("button",{disabled:l,className:"da-modalFooter__button o-button",onClick:g},s)))):null},m=e=>{let{showTyping:t,typingMessage:a,chatId:o,chatIdLabel:i}=e;return n.createElement("div",{className:"da-chatLingualBar"},n.createElement("div",{className:"da-chatLingualBar__typing"},t&&n.createElement("span",null,a)),o&&n.createElement("div",{className:"da-chatLingualBar__id"},i," ",o))},u=e=>{let{children:t}=e;return n.createElement("div",{className:"da-chat__tabContentInner"},t)};var g=a(89379),p=a(80045),h=a(62771),f=a.n(h),b=a(69331);const v=["onMessageEnter","children"],x=(0,n.createContext)({disabled:!1,hideSpinner:!1,placeholder:"",inputMessage:"",setInputMessage:e=>{},onSendMessage:e=>{},onMessageChange:e=>{}}),y=e=>{let{onMessageEnter:t,children:a}=e,o=(0,p.A)(e,v);const i=(0,n.useContext)(x),[s,l]=(0,n.useState)(""),r=(0,n.useCallback)(e=>{t(e),l("")},[t]),c=(0,g.A)((0,g.A)((0,g.A)({},i),o),{},{inputMessage:s,onSendMessage:r,setInputMessage:l});return n.createElement(x.Provider,{value:c},n.createElement("div",{className:"da-chatLingualForm"},a))};y.MessageInputWrapper=e=>{let{children:t}=e;const{disabled:a,hideSpinner:o}=(0,n.useContext)(x);return n.createElement("div",{className:f()("da-chatLingualForm__inner",{disabled:a})},t,a&&!o&&n.createElement(b.A,null))},y.MessageInput=()=>{const{disabled:e,placeholder:t,inputMessage:a,setInputMessage:o,onSendMessage:i,onMessageChange:s}=(0,n.useContext)(x);return n.createElement("input",{disabled:e,autoFocus:!0,className:f()("da-chatLingualForm__input",{"da-chatLingualForm__input--disabled":e}),value:a,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&i(e.target.value),onKeyUp:e=>"Enter"!==e.key&&s(e.target.value),autoComplete:"off",placeholder:t})},y.MessageSendPanel=e=>{let{showAttachmentInput:t,fileValue:a,onFileChange:o}=e;const{disabled:i,inputMessage:s,onSendMessage:l}=(0,n.useContext)(x),r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{!a&&r.current&&(r.current.value="")},[a]),n.createElement("div",{className:"da-chatLingualForm__buttons"},!i&&n.createElement("div",{onClick:e=>!i&&l(s),className:"da-chatLingualForm__button da-chatLingualForm__button--send"},n.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 32 32"},n.createElement("path",{d:"M23.027 7.44c-0.206-0.119-0.46-0.119-0.667 0l-16 9.333c-0.219 0.128-0.347 0.37-0.328 0.624s0.179 0.474 0.415 0.57l5.093 2.080 1.127 4.133c0.077 0.276 0.321 0.471 0.607 0.487h0.060c0.211-0.002 0.409-0.103 0.533-0.273v0l1.9-2.613 5.333 2.173c0.194 0.074 0.412 0.052 0.589-0.057s0.292-0.296 0.311-0.503l1.333-15.333c0.021-0.248-0.097-0.487-0.307-0.62zM11.707 18.667l-3.533-1.447 10.853-6.333-7.32 7.78zM18.373 13.5l-4.273 6.813c-0.021 0.034-0.039 0.070-0.053 0.107l-0.607 1.52-0.667-2.427 5.6-6.013zM20.72 22.367l-5.060-2.073 6.107-9.627-1.047 11.7z"}))),!i&&t&&n.createElement("label",{className:"da-chatLingualForm__button"},n.createElement("input",{ref:r,type:"file",className:"cl-attachment-file",onChange:o}),n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}))))},y.ChatAction=e=>{let{canEnd:t,onEnd:a}=e;return n.createElement(n.Fragment,null,t&&n.createElement("div",{className:"da-chatLingualForm__button da-chatLingualForm__button",onClick:e=>a()},n.createElement("svg",{width:"19",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M10.75 9.75V3.926a.557.557 0 00-.164-.41.518.518 0 00-.41-.192H.824c-.164 0-.3.064-.41.192a.557.557 0 00-.164.41V9.75a.557.557 0 00.574.574H2v1.75c0 .128.027.246.082.356.07.09.165.156.273.191a.53.53 0 00.329.055.575.575 0 00.3-.192l2.16-2.16h5.032a.559.559 0 00.574-.574zm-1.176-.574H4.926a.542.542 0 00-.246.054.431.431 0 00-.164.11l-1.34 1.34v-.93c0-.164-.064-.3-.192-.41a.557.557 0 00-.41-.164H1.426V4.5h8.148v4.676zM17.176 8H12.5a.557.557 0 00-.574.574c0 .164.055.31.164.438.11.11.246.164.41.164h4.074V15h-1.75a.559.559 0 00-.574.574v.93l-1.34-1.34a.405.405 0 00-.191-.11A.484.484 0 0012.5 15H8.426v-2.926c0-.164-.064-.3-.192-.41a.558.558 0 00-.41-.164.559.559 0 00-.574.574v3.5c0 .164.055.31.164.438.11.11.246.164.41.164h4.43l2.16 2.16c.09.072.191.128.3.164a.59.59 0 00.356-.055.604.604 0 00.246-.19.587.587 0 00.11-.329v-1.75h1.75c.164 0 .3-.055.41-.164a.653.653 0 00.164-.438v-7A.559.559 0 0017.176 8z"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.146 19.142L.003.998.71.29l18.144 18.144-.707.707z"}))))};const E=y,C=(0,n.forwardRef)((e,t)=>{let{fileUploadShow:a,fileUploadTitle:o,fileUploadCancelLabel:r,fileUploadConfirmLabel:g,fileUploadIsInProgress:p,fileUploadFileName:h,fileUploadFileDescription:f,fileUploadInProgressMessage:b,fileUploadPlaceholder:v,fileUploadOnFileDescriptionChange:x,fileUploadOnCancel:y,fileUploadOnConfirm:C,endChatShow:w,endChatTitle:k,endChatDescription:N,endChatCancelLabel:A,endChatConfirmLabel:_,endChatOnCancel:S,endChatOnConfirm:I,agents:M,getUserAvatarComponent:L,chatBodyWelcome:T,chatBodyMessageList:z,chatIndicatorShowTyping:F,chatIndicatorTypingMessage:R,chatIndicatorChatId:O,chatIndicatorChatLabel:D,chatConnectionShow:U,chatConnectionContent:P,sendboxDisabled:H,sendboxHideSpinner:B,sendboxPlaceholder:W,sendboxOnMessageChange:J,sendboxOnMessageEnter:G,sendboxShowAttachmentInput:j,sendboxFileValue:V,sendboxOnFileChange:Y,chatActionCanEnd:q,chatActionOnEnd:Q}=e;return n.createElement(u,null,n.createElement(d,{show:a,title:o,cancelLabel:r,confirmLabel:g,isInProgress:p,fileName:h,fileDescription:f,uploadPlaceholder:v,inProgressMessage:b,onFileDescriptionChange:x,onCancel:y,onConfirm:C}),n.createElement(l,{show:w,title:k,description:N,confirmLabel:_,cancelLabel:A,onCancel:S,onConfirm:I}),n.createElement(c,{agents:M,getUserAvatarComponent:L}),n.createElement(i,{ref:t,welcome:T,messageList:z}),n.createElement(m,{showTyping:F,typingMessage:R,chatId:O,chatIdLabel:D}),n.createElement(s,{show:U,messageContent:P}),n.createElement(E,{disabled:H,hideSpinner:B,placeholder:W,onMessageChange:J,onMessageEnter:G},n.createElement(E.MessageInputWrapper,null,n.createElement(E.MessageInput,null),n.createElement(E.MessageSendPanel,{showAttachmentInput:j,fileValue:V,onFileChange:Y})),n.createElement(E.ChatAction,{canEnd:q,onEnd:Q})))});C.displayName="AgnosticLiveAgent";const w=C},78158:(e,t,a)=>{var n=a(85072),o=a(42725);"string"===typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);var i={};i.insert=function(e,t){const a=(()=>{const e=(()=>{if(!window.DA||"object"!==typeof window.DA||"function"!==typeof window.DA.getCspNonce)throw Error("CSP policy provider is not set");return window.DA.getCspNonce()})();if(e)return e})();a&&e.setAttribute("nonce",a),document.head.appendChild(e)},i.singleton=!1;n(o,i);e.exports=o.locals||{}},87564:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var n=a(73021),o=a(62771),i=a.n(o);const s=e=>{let{isLoading:t,onChange:a,deptList:o,selectedDept:s}=e;return n.createElement("ul",{className:"da-chatLingualDept__list"},o.map(e=>n.createElement("li",{key:e.apiKey,onClick:()=>!t&&a(e.apiKey),className:i()("da-chatLingualDept__button",{"da-chatLingualDept__button--active":e.apiKey===s,"da-chatLingualForm__input--disabled":t})},e.name)))},l=e=>{const{onSave:t,deptList:a,dept:o,title:i,isLoading:l}=e;return n.createElement("div",{className:"da-chatLingualDept"},n.createElement("div",{className:"da-chatLingualDept__inner"},n.createElement("strong",{className:"da-chatLingualDept__title"},i),n.createElement(s,{isLoading:l,onChange:t,deptList:a,selectedDept:o})))};var r=a(9271);const c=function(e){const{isForwardMessagesDialogOpened:t,onResult:a}=e;return t?n.createElement("div",{className:"da-modal"},n.createElement("div",{className:"da-modal__inner"},n.createElement("div",{className:"da-modalHeader"},n.createElement("h2",{className:"da-modalHeader__title"},"Forward conversation"),n.createElement("button",{"aria-label":"Close modal",className:"da-modalHeader__close"})),n.createElement("div",{className:"da-modalBody"},n.createElement("div",{className:"da-modalBody__switch"},n.createElement("p",{className:"da-modalBody__switchTitle"},"I am transferring you to a live support agent. I can forward our current Deloitte Assistant conversation for reference. Should I send our conversation to the live support agent?"))),n.createElement("div",{className:"da-modalFooter"},n.createElement("button",{className:"da-modalFooter__button o-button o-button--secondary",onClick:()=>a("cancelled")},"Cancel"),n.createElement("button",{className:"da-modalFooter__button o-button o-button--secondary",onClick:()=>a("disconfirmed")},"Do Not Send"),n.createElement("button",{className:"da-modalFooter__button o-button",onClick:()=>a("confirmed")},"Send")))):null};var d=a(54869),m=a(69331),u=a(89379),g=a(28070);const p=3e3,h="ManualConnectionClose",f=e=>e.code===p&&e.reason===h;var b=a(52271),v=a(56076),x=a(49477),y=a(17473);const E=e=>{let{title:t,customClassName:a}=e;const o=(0,n.useMemo)(()=>a||"da-chatAgent__initials",[a]);return n.createElement("span",{className:o},t)},C=e=>{let{user:t,customClassName:a}=e;const{initials:o}=(0,g.wr)(t);return n.createElement(E,{title:o,customClassName:a})};a(78158);var w=a(26566),k=a(48340),N=a(74393),A=a(65566);var _=a(46832);class S{constructor(){this.socket=null}static getInstance(){return S.instance||(S.instance=new S),S.instance}setSocket(e){this.socket=e}getSocket(){return this.socket}createSocket(e){return new window.WebSocket(e)}}S.instance=void 0;const I=w.Y.getInstance(),M=S.getInstance(),L="EndChat",T=e=>{let{conversationId:t,sessionId:a,deploymentId:o,socketUrl:i,apiEndpoint:s,userName:l,userId:r,userEmail:c,departmentId:d,isApp:m,forwardMessages:w,languageCode:S,labels:T,onEvent:z}=e;const F=(0,n.useRef)(null),R=(0,n.useRef)(null),[O]=(0,n.useState)(a||(0,A.l)()),[D,U]=(0,n.useState)("initial"),[P,H]=(0,n.useState)(null),[B,W]=(0,n.useState)([]),J=(0,n.useRef)(B);J.current=B;const[G,j]=(0,n.useState)(!1),[V,Y]=(0,n.useState)(!1),[q,Q]=(0,n.useState)(null),[,K]=(0,n.useState)(""),[Z,$]=(0,n.useState)(""),[X,ee]=(0,n.useState)(!1),[te,ae]=(0,n.useState)(),ne=(0,n.useRef)(null),[,oe]=(0,n.useState)(),[ie,se]=(0,n.useState)(!1),[le,re]=(0,n.useState)([]),{onAnyMessage:ce}=(0,g.v9)();(0,g.Nx)(B.length,ne.current);const{getFirstAndLastName:de,getFullName:me}=(0,g.wr)(),ue=(0,n.useMemo)(()=>"connected"===D||"initial"===D||"inProgress"===D,[D]),ge=(0,n.useMemo)(()=>"initial"===D&&0===w.length,[D,w.length]),pe=(0,n.useMemo)(()=>"initial"!==D||!(!te&&!a),[te,a,D]),he=(0,n.useRef)(t);(0,n.useEffect)(()=>{he.current=t},[t]);const fe=(0,n.useCallback)(e=>{var t,a;return"undefined"!==typeof(null===e||void 0===e||null===(t=e.channel)||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.customAttributes)?!!e.channel.metadata.customAttributes.email:!!e.direction&&e.direction===_.ZM.Inbound},[]),be=(0,n.useCallback)((e,t,a)=>I.translate(T,e,t,a),[T]),ve=(0,n.useCallback)(function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim();if(0===e.length)return null;if(-1===e.indexOf("_")&&-1===e.indexOf("_"))return{firstName:e,lastName:""};const t=e.indexOf("_")>=0?"_":" ",[a,n]=e.split(t);return{firstName:a||"",lastName:n||""}},[]),xe=(0,n.useCallback)(e=>{let t=!1;W(a=>(t=!!a.find(t=>t.id===e.id),t?a:[...a,e].sort((e,t)=>e.time.getTime()-t.time.getTime()))),t||e.fromPrevSession||ce([e])},[ce]),ye=(0,n.useCallback)(e=>{var t;const a=fe(e);let n="",o=0;if(a)n=be("you","You");else if(o=-1,"Bot"!==e.originatingEntity){var i,s;const t=null===(i=e.channel)||void 0===i||null===(s=i.from)||void 0===s?void 0:s.nickname,a=ve(t);a?(n=me(a),a.id&&(o=a.id)):n="Agent"}else n="Agent";const l=new Date((null===(t=e.channel)||void 0===t?void 0:t.time)||Date.now());return{id:e.id,body:e.text,from:{id:o,name:n},time:l,isCurrentUser:a,messageFromName:n,originatingEntity:e.originatingEntity}},[ve,me,fe,be]),Ee=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fromPrevSession:a,fileName:n}=t;return(0,u.A)((0,u.A)({},ye(e)),{},{bodyLanguage:{id:0,languageId:0,code:"",name:""},translationLanguage:"",translation:null,translationLocale:null,messageFromLanguage:"",localeName:"",fileName:n,fromPrevSession:a})},[ye]),Ce=(0,n.useCallback)(e=>(0,u.A)((0,u.A)({},ye(e)),{},{interaction:{data:{options:e.content.filter(e=>e.contentType===_.IY.QuickReply).map(e=>({label:e.quickReply.text,value:e.quickReply.payload}))},html:"",id:0,type:N.IL.Options}}),[ye]),we=(0,n.useCallback)(e=>{const t=e.channel||{},a=t.metadata||{},n=a.customAttributes||{},o={time:Date.now(),email:c,lob:d};return(0,u.A)((0,u.A)({},e),{},{channel:(0,u.A)((0,u.A)({},t),{},{metadata:(0,u.A)((0,u.A)({},a),{},{customAttributes:(0,u.A)((0,u.A)({},n),o)})})})},[d,c]),ke=(0,n.useCallback)(e=>{F.current.send(JSON.stringify(we(e)))},[we]),Ne=(0,n.useCallback)((e,t)=>{const a=B.find(t=>t.id===e);if(!a)return;const n=a.interaction.data.options.find(e=>e.value===t);if(!n)return;if(t===L)return void z({name:_.kn.ChatWithGenesysSupportAgentChatViewClose,data:{}});const o={action:_.tl.OnMessage,token:O,message:{type:_.mM.Text,content:[{contentType:_.IY.ButtonResponse,buttonResponse:{text:n.label,type:_.iT.QuickReply,payload:n.value}}]}};ke(o)},[B,z,ke,O]),Ae=(0,n.useCallback)(e=>B.length>0&&B[B.length-1].id!==e,[B]),_e=(0,n.useCallback)(()=>{const e={action:_.tl.OnMessage,token:O,message:{type:_.mM.Event,events:[{eventType:_.n4.Typing,typing:{type:"On"}}]}};ke(e)},[ke,O]),Se=(0,n.useCallback)(()=>{R.current&&(clearTimeout(R.current),R.current=null)},[]),Ie=(0,n.useCallback)(e=>{Se(),e&&(R.current=setTimeout(()=>{_e()},5e3))},[_e,Se]),Me=(0,n.useCallback)(e=>{(he.current,function(e,t){})("ConnectionClosed",k.dm.Information),f(e)||U("connectionClosed")},[]),Le=(0,n.useCallback)(function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(he.current,function(e,t){})("ChatClosed",k.dm.Information,{sessionId:O,userId:r}),e?z({name:_.kn.ChatWithGenesysSupportAgentTerminated,data:{}}):(z({name:_.kn.ChatWithGenesysSupportAgentTerminatedWithoutConfirmation,data:{}}),U("ended")),Me({code:p,reason:h})},[Me,z,O,r]),Te=(0,n.useCallback)(e=>"Bot"===e.originatingEntity&&"string"===typeof e.text&&e.text.toLowerCase().indexOf("selected department doesn't exist")>=0,[]),ze=(0,n.useCallback)(()=>{Le(),z({name:_.kn.ChatWithGenesysSupportAgentOnDeptNotAvailable,data:{}})},[Le,z]),Fe=(0,n.useCallback)(e=>{Te(e)&&ze()},[Te,ze]),Re=(0,n.useCallback)((e,t)=>{const a=e.content[0],n=(0,u.A)((0,u.A)({},e),{},{text:e.text?"".concat(e.text," ").concat(a.attachment.url):a.attachment.url});xe(Ee(n,{fileName:a.attachment.filename}))},[xe,Ee]),Oe=(0,n.useCallback)((e,t)=>{const a=(0,u.A)((0,u.A)({},e),{},{text:e.content[0].buttonResponse.text});xe(Ee(a,t))},[xe,Ee]),De=(0,n.useCallback)((e,t)=>{xe(Ce(e))},[xe,Ce]),Ue=(0,n.useCallback)((e,t)=>{const a=(0,u.A)((0,u.A)({},e),{},{text:be("agent_closed_session","The agent has closed the session."),content:[{contentType:_.IY.QuickReply,quickReply:{action:"",payload:L,text:"".concat(be("return_to","Return to")," Deloitte Assistant")}}]});De(a,t)},[De,be]),Pe=(0,n.useCallback)(e=>{var t,a,n;const o=e;if(!Array.isArray(o.events)||(null===(t=o.events[0])||void 0===t?void 0:t.eventType)!==_.n4.Presence)return!1;return(null===(a=e.events[0])||void 0===a||null===(n=a.presence)||void 0===n?void 0:n.type)===_.qo.Disconnect},[]),He=(0,n.useCallback)(e=>{const t=(0,u.A)((0,u.A)({},e),{},{type:_.mM.Text});Ue(t,{}),Le(!1)},[Ue,Le]),Be=(0,n.useCallback)((e,t)=>{const a=J.current.find(t=>{var a,n,o;return t.id===(null===(a=e.channel)||void 0===a||null===(n=a.metadata)||void 0===n||null===(o=n.customAttributes)||void 0===o?void 0:o.externalMessageId)});if(!a)return xe(Ee(e,t)),void Fe(e);W(n=>n.map(n=>n.id===a.id?Ee(e,t):n))},[xe,Fe,Ee]),We=(0,n.useCallback)(function(e){var t,a,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e;i.content&&(null===(t=i.content[0])||void 0===t?void 0:t.contentType)===_.IY.Attachment?Re(i,o):Array.isArray(i.content)&&(null===(a=i.content[0])||void 0===a?void 0:a.contentType)===_.IY.ButtonResponse?Oe(i,o):Array.isArray(i.content)&&(null===(n=i.content[0])||void 0===n?void 0:n.contentType)===_.IY.QuickReply?De(i,o):Be(i,o)},[Re,Oe,De,Be]),Je=(0,n.useCallback)(e=>(e.forEach(e=>{e.id=(0,A.l)()}),e),[]),Ge=(0,n.useCallback)(e=>({id:"",type:_.mM.Text,direction:_.ZM.Inbound,text:e}),[]),je=(0,n.useCallback)(e=>{const t=e.map(Ge);return Je(t).forEach(e=>We(e)),t.map(e=>e.id)},[Ge,We,Je]),Ve=(0,n.useCallback)(e=>{let{id:t,value:a}=e;Se();const n={action:_.tl.OnMessage,token:O,message:{type:_.mM.Text,text:a},channel:{metadata:{customAttributes:{externalMessageId:t}}}};ke(n)},[ke,Se,O]),Ye=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.trim();if(!t)return;const[n]=je([e]),o={id:n,value:t};te||a?Ve(o):ae(o)},[je,te,Ve,a]),qe=(0,n.useCallback)(function(){"inProgress"===D&&Ie(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},[D,Ie]),Qe=(0,n.useRef)([]);(0,n.useEffect)(()=>{if(w.length>0&&!te){const e=je(w);Qe.current=w.map((t,a)=>({id:e[a],value:t})),ae(Qe.current[0])}},[je,te,w]);const Ke=(0,n.useCallback)(()=>{const e={action:_.tl.ConfigureSession,deploymentId:o,token:O};ke(e)},[o,ke,O]),Ze=(0,n.useCallback)(e=>{const t=e.target.files&&e.target.files[0];t&&(Y(!0),Q(t))},[]),$e=(0,n.useCallback)(()=>{Y(!1),$(""),Q(null),K("")},[]),Xe=(0,n.useCallback)(()=>{if(q){ee(!0);const e={action:_.tl.OnAttachment,fileName:q.name,fileType:q.type,fileSize:q.size,token:O};ke(e)}},[ke,O,q]),et=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=await(await fetch("".concat(s,"/api/v2/webmessaging/messages?").concat(new URLSearchParams({pageSize:t.toString(),pageNumber:a.toString()})),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})).json();return n.entities||(n.entities=[]),n},[s]),tt=(0,n.useCallback)(async e=>{(await et(e)).entities.forEach(e=>{Pe(e)?He(e):We(e,{fromPrevSession:!0})})},[et,He,Pe,We]);(0,n.useEffect)(()=>{if(!pe)return;const e=e=>{const t=JSON.parse(e.data);if(t.type===_.tA.Response){if(t.class===_.nG.SessionResponse){if(200===t.code){var a;const e=t;var n;if(null!==(a=e.body)&&void 0!==a&&a.connected)if(U("inProgress"),null!==(n=e.body)&&void 0!==n&&n.newSession)Qe.current.length>0?(Qe.current.forEach(Ve),z({name:_.kn.ChatWithGenesysSupportAgentOnMessagesForwarded,data:{}})):te&&Ve(te),z({name:_.kn.ChatWithGenesysSupportAgentInitiated,data:{sessionId:O,lang:S}}),(he.current,function(e,t){})("SessionCreated",k.dm.Information,{sessionId:O,userId:r});else{const e={action:_.tl.GetJwt,token:O};ke(e),(he.current,function(e,t){})("SessionRestored",k.dm.Information,{sessionId:O,userId:r})}else(he.current,function(e,t){})("SessionFailed",k.dm.Critical,{sessionId:O,userId:r}),U("sessionError"),oe("Cannot connect")}}else if(t.class===_.nG.JwtResponse){if(200===t.code){const{body:{jwt:e}}=t;tt(e)}}else if(t.class===_.nG.StructuredMessage)200===t.code&&xe(Ee(t.body));else if(t.class===_.nG.PresignedUrlResponse&&200===t.code){const e=t;Q(t=>{if(t){var a=new XMLHttpRequest;let n=e.body.url;a.open("PUT",n,!0),a.onreadystatechange=()=>{K(e.body.attachmentId),4===a.readyState&&200===a.status&&K(e.body.attachmentId)},Object.keys(e.body.headers).forEach(t=>{a.setRequestHeader(t,e.body.headers[t])}),a.send(t)}return t})}}else if(t.type===_.tA.Message)if(fe(t.body)||se(!1),t.class===_.nG.StructuredMessage){if(200===t.code)if(Array.isArray(t.body.events)){var o;const e=t;var i;if((null===(o=e.body.events[0])||void 0===o?void 0:o.eventType)===_.n4.Typing){if(!fe(e.body))se("On"===(null===(i=e.body.events[0])||void 0===i?void 0:i.typing.type))}else if(Pe(t.body)){const e=t.body;He(e)}}else{var s,l,c,d;null!==(s=t.body)&&void 0!==s&&null!==(l=s.channel)&&void 0!==l&&null!==(c=l.metadata)&&void 0!==c&&null!==(d=c.customAttributes)&&void 0!==d&&d.isTechnicalMessage||We(t.body)}}else t.class===_.nG.UploadSuccessEvent&&200===t.code&&$(e=>(K(t=>{if(!t)return;const a={action:_.tl.OnMessage,message:{type:_.mM.Text,text:e,content:[{contentType:_.IY.Attachment,attachment:{id:t}}]},token:O};return ke(a),setTimeout(()=>{ee(!1),$e()}),""}),""))},t=e=>{(he.current,function(e,t){})("ConnectionFailed",k.dm.Critical),U("connectionError"),H(String(e))};return function(e,t,a,n,o,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e=>{};const l=async()=>new Promise((a,n)=>{const o=e.getSocket();if(o&&o.readyState===WebSocket.OPEN)return a(o);const i=e.createSocket(t);e.setSocket(i),i.addEventListener("open",()=>{a(i)}),i.addEventListener("error",e=>{n(e)})}),r=async()=>{const e=[];for(let n=1;n<=a;n++)e.push(n);let t=null,o=null;for(let a of e){s(a);const r=a===e[e.length-1];try{o=null,t=await l();break}catch(i){t=null,o=i,r||await new Promise(e=>setTimeout(e,n))}}return{socket:t,error:o}},c=async(e,t)=>{e?(o(e),e.addEventListener("close",async e=>{if(f(e))return;i("connectionWasClosed");const t=await r();c(t.socket,t.error)})):i(t)};r().then(e=>{let{socket:t,error:a}=e;return c(t,a)})}(M,i,5,5e3,a=>{F.current=a,U("connected"),H(null),(he.current,function(e,t){})("ConnectionCreated",k.dm.Information),Ke(),a.addEventListener("message",e),a.addEventListener("error",t),a.addEventListener("close",Me)},t,()=>{U("connecting")}),()=>{F.current&&(F.current.removeEventListener("message",e),F.current.removeEventListener("error",t),F.current.removeEventListener("close",Me))}},[xe,He,Ke,Ce,Ee,te,et,fe,S,tt,We,z,$e,Re,Oe,De,Be,ke,Ve,pe,i,O,r,Me,Pe]);const at=(0,n.useCallback)(()=>{j(!1)},[]),nt=(0,n.useCallback)(()=>{j(!0)},[]),ot=(0,n.useCallback)(()=>{},[]),it=(0,n.useCallback)((e,t)=>{if(t.isCurrentUser)return null;return"Bot"===t.originatingEntity?n.createElement(E,{title:t.originatingEntity,customClassName:"da-chatMessage__initials"}):n.createElement(C,{user:e,customClassName:"da-chatMessage__initials"})},[]);return(0,n.useEffect)(()=>{B.forEach(e=>{if(!e.isCurrentUser&&"Bot"!==e.originatingEntity&&!le.find(t=>me(t)===e.messageFromName)){const t=de(e.messageFromName);re([...le,t])}})},[le,de,me,B]),n.createElement(v.A,{ref:ne,fileUploadShow:V,fileUploadTitle:(0,b.Z)(be("upload","Upload")),fileUploadCancelLabel:be("cancel","Cancel"),fileUploadConfirmLabel:be("upload","Upload"),fileUploadIsInProgress:X,fileUploadFileName:(null===q||void 0===q?void 0:q.name)||"",fileUploadFileDescription:Z,fileUploadInProgressMessage:"Uploading ...",fileUploadPlaceholder:be("upload_instruction","Enter a description of this file (optional)"),fileUploadOnFileDescriptionChange:$,fileUploadOnCancel:$e,fileUploadOnConfirm:Xe,endChatShow:G,endChatTitle:(0,b.Z)(be("close_chat_confirmation","Close support chat")),endChatDescription:be("confirm_end","Are you sure you want to end this chat?"),endChatCancelLabel:be("cancel","Cancel"),endChatConfirmLabel:be("close","Close"),endChatOnCancel:at,endChatOnConfirm:Le,agents:le,getUserAvatarComponent:e=>n.createElement(C,{user:e}),chatBodyWelcome:n.createElement(x.A,{title:"",showLogo:ge}),chatBodyMessageList:n.createElement(y.A,{messages:B,isMessageInteracted:Ae,isApp:m,onInteractionOptionClick:Ne,onTranslationClick:ot,getUserAvatarComponent:it}),chatIndicatorShowTyping:ie,chatIndicatorTypingMessage:"Agent ".concat(be("typing","is typing ...")),chatIndicatorChatId:O,chatIndicatorChatLabel:"Chat ID:",chatConnectionShow:!!P||"connectionClosed"===D,chatConnectionContent:n.createElement("div",null,"Chat connection lost. ","connecting"===D&&P&&"Connecting...","connectionWasClosed"!==P&&n.createElement("a",{className:"da-chatConnectionStatus__reload",href:"/",onClick:e=>{e.preventDefault(),window.location.reload()}}," Reload")),sendboxDisabled:!ue,sendboxHideSpinner:"ended"===D,sendboxPlaceholder:be("placeholder","Type your message here..."),sendboxOnMessageChange:qe,sendboxOnMessageEnter:Ye,sendboxShowAttachmentInput:B.length>0,sendboxFileValue:q,sendboxOnFileChange:Ze,chatActionCanEnd:"inProgress"===D,chatActionOnEnd:nt})};var z=a(44832);const F=e=>{let{onDeptNotAvailableResult:t}=e;return n.createElement("div",{className:"da-modal"},n.createElement("div",{className:"da-modal__inner"},n.createElement("div",{className:"da-modalHeader"},n.createElement("h2",{className:"da-modalHeader__title"},"Department unavailable"),n.createElement("button",{"aria-label":"Close modal",className:"da-modalHeader__close"})),n.createElement("div",{className:"da-modalBody"},n.createElement("div",{className:"da-modalBody__switch"},n.createElement("p",{className:"da-modalBody__switchTitle"},"Unfortunately this department is unavailable at the moment"))),n.createElement("div",{className:"da-modalFooter da-modalFooter__lg"},n.createElement("button",{className:"da-modalFooter__button o-button o-button o-button--multiline",onClick:()=>t("choseAnotherDept")},"Choose another department"),n.createElement("button",{className:"da-modalFooter__button o-button o-button--multiline",onClick:()=>t("switchToAssistant")},n.createElement(z.A,{labelKey:r.z.AssistantName,renderElement:e=>n.createElement(n.Fragment,null,"Switch to ",e)})))))},R=n.lazy(()=>a.e(965).then(a.bind(a,20202))),O="You can speak to a live agent for help with the following topics. Please choose one.",D=e=>{var t;let{env:a,dept:o,onDeptSave:i,isForwardMessagesDialogOpened:s,onForwardResult:u,isDeptModalOpen:p,config:h,isChatLingualOpen:f,languageCode:b,onEvent:v,onStartNewChat:x,onLanguageChange:y,onResetState:E,onMessagesForwarded:C,sessionQueueError:w,isApp:k,qDependency:N,messages:A,sessionQueue:_,glaState:S,userId:I,userName:M,userEmail:L,conversationId:z,languageName:D,isNotAvailableDeptModalOpen:U,onDeptNotAvailableResult:P}=e;const[H,B]=(0,n.useState)(!1),W=(0,g.NC)(a,null===h||void 0===h?void 0:h.departments),J=(0,g.NC)(a,null===(t=S.config)||void 0===t?void 0:t.departments);(0,n.useEffect)(()=>{if(H){const e=setTimeout(()=>{B(!1)},3e3);return()=>clearTimeout(e)}},[H]);const G=(0,n.useCallback)((e,t)=>{B(!0),i(e,t)},[i]),j=(0,n.useMemo)(()=>!(p||U||!o),[o,p,U]),V=(0,n.useMemo)(()=>S.labels[S.glaLanguage]||null,[S.labels,S.glaLanguage]),Y=(0,n.useMemo)(()=>!(p||U||!S.dept||!Array.isArray(A)||!V),[V,S.dept,p,U,A]),q=(0,n.useMemo)(()=>p&&0===W.length&&0===J.length,[p,W,J]);return n.createElement(n.Fragment,null,n.createElement(c,{isForwardMessagesDialogOpened:s,onResult:u}),p&&n.createElement("div",{className:"da-chatLingualDeptWrapper"},!q&&n.createElement(n.Fragment,null,W.length>0&&n.createElement(l,{deptList:W,dept:o,title:O,isLoading:H,onSave:e=>G(e,"ChatLingual")}),J.length>0&&n.createElement(l,{deptList:J,dept:S.dept,title:0===W.length?O:"",isLoading:H,onSave:e=>G(e,"GenesysLiveAgent")})),q&&n.createElement("div",{className:"da-chatLingualDeptWrapper__message"},"Unfortunately, there no available topics for your location")),U&&n.createElement(F,{onDeptNotAvailableResult:P}),j&&n.createElement(d.A,{renderElement:()=>n.createElement(R,{isOpen:f,languageCode:b,onEvent:v,onStartNewChat:x,onLanguageChange:y,onResetState:E,onMessagesForwarded:C,messages:A,sessionQueue:_,sessionQueueError:w,dept:o,isApp:k,qDependency:N,config:h}),customFallbackElement:n.createElement(m.A,{title:r.z.LoadingLiveAgent})}),Y&&n.createElement(d.A,{renderElement:()=>n.createElement(T,{conversationId:z,socketUrl:S.config.wssEndpoint+"?deploymentId="+S.config.deploymentId,apiEndpoint:S.config.apiEndpoint,fileUploadEndpoint:S.config.fileUploadEndpoint,deploymentId:S.config.deploymentId,sessionId:S.sessionId,userId:I,userName:M,userEmail:L,departmentId:S.dept,forwardMessages:A,languageCode:S.glaLanguage,languageName:D,glaLanguageCode:S.glaLanguage,isApp:k,labels:V,onEvent:v}),customFallbackElement:n.createElement(m.A,{title:r.z.LoadingLiveAgent})}))}}}]);