(()=>{var an=Object.create;var se=Object.defineProperty;var on=Object.getOwnPropertyDescriptor;var sn=Object.getOwnPropertyNames;var cn=Object.getPrototypeOf,un=Object.prototype.hasOwnProperty;var pn=(e,r)=>()=>(e&&(r=e(e=0)),r);var o=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var gn=(e,r,n,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of sn(r))!un.call(e,s)&&s!==n&&se(e,s,{get:()=>r[s],enumerable:!(i=on(r,s))||i.enumerable});return e};var L=(e,r,n)=>(n=e!=null?an(cn(e)):{},gn(r||!e||!e.__esModule?se(n,"default",{value:e,enumerable:!0}):n,e));var t=pn(()=>{});var d=o((Qs,ce)=>{t();var fn=Array.isArray;ce.exports=fn});var F=o((rc,ue)=>{t();var ln=typeof global=="object"&&global&&global.Object===Object&&global;ue.exports=ln});var g=o((nc,pe)=>{t();var hn=F(),dn=typeof self=="object"&&self&&self.Object===Object&&self,yn=hn||dn||Function("return this")();pe.exports=yn});var P=o((oc,ge)=>{t();var bn=g(),vn=bn.Symbol;ge.exports=vn});var de=o((sc,he)=>{t();var fe=P(),le=Object.prototype,mn=le.hasOwnProperty,xn=le.toString,_=fe?fe.toStringTag:void 0;function qn(e){var r=mn.call(e,_),n=e[_];try{e[_]=void 0;var i=!0}catch{}var s=xn.call(e);return i&&(r?e[_]=n:delete e[_]),s}he.exports=qn});var be=o((uc,ye)=>{t();var Tn=Object.prototype,_n=Tn.toString;function Sn(e){return _n.call(e)}ye.exports=Sn});var y=o((gc,xe)=>{t();var ve=P(),wn=de(),jn=be(),In="[object Null]",Cn="[object Undefined]",me=ve?ve.toStringTag:void 0;function An(e){return e==null?e===void 0?Cn:In:me&&me in Object(e)?wn(e):jn(e)}xe.exports=An});var S=o((lc,qe)=>{t();function On(e){return e!=null&&typeof e=="object"}qe.exports=On});var M=o((dc,Te)=>{t();var En=y(),Pn=S(),Mn="[object Symbol]";function Nn(e){return typeof e=="symbol"||Pn(e)&&En(e)==Mn}Te.exports=Nn});var Se=o((bc,_e)=>{t();var Dn=d(),Ln=M(),Fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gn=/^\w*$/;function Un(e,r){if(Dn(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ln(e)?!0:Gn.test(e)||!Fn.test(e)||r!=null&&e in Object(r)}_e.exports=Un});var G=o((mc,we)=>{t();function Rn(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}we.exports=Rn});var U=o((qc,je)=>{t();var zn=y(),Bn=G(),Kn="[object AsyncFunction]",kn="[object Function]",Hn="[object GeneratorFunction]",Vn="[object Proxy]";function $n(e){if(!Bn(e))return!1;var r=zn(e);return r==kn||r==Hn||r==Kn||r==Vn}je.exports=$n});var Ce=o((_c,Ie)=>{t();var Wn=g(),Yn=Wn["__core-js_shared__"];Ie.exports=Yn});var Ee=o((wc,Oe)=>{t();var R=Ce(),Ae=function(){var e=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Xn(e){return!!Ae&&Ae in e}Oe.exports=Xn});var z=o((Ic,Pe)=>{t();var Jn=Function.prototype,Zn=Jn.toString;function Qn(e){if(e!=null){try{return Zn.call(e)}catch{}try{return e+""}catch{}}return""}Pe.exports=Qn});var Ne=o((Ac,Me)=>{t();var ea=U(),ra=Ee(),ta=G(),na=z(),aa=/[\\^$.*+?()[\]{}|]/g,oa=/^\[object .+?Constructor\]$/,ia=Function.prototype,sa=Object.prototype,ca=ia.toString,ua=sa.hasOwnProperty,pa=RegExp("^"+ca.call(ua).replace(aa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ga(e){if(!ta(e)||ra(e))return!1;var r=ea(e)?pa:oa;return r.test(na(e))}Me.exports=ga});var Le=o((Ec,De)=>{t();function fa(e,r){return e?.[r]}De.exports=fa});var l=o((Mc,Fe)=>{t();var la=Ne(),ha=Le();function da(e,r){var n=ha(e,r);return la(n)?n:void 0}Fe.exports=da});var w=o((Dc,Ge)=>{t();var ya=l(),ba=ya(Object,"create");Ge.exports=ba});var ze=o((Fc,Re)=>{t();var Ue=w();function va(){this.__data__=Ue?Ue(null):{},this.size=0}Re.exports=va});var Ke=o((Uc,Be)=>{t();function ma(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}Be.exports=ma});var He=o((zc,ke)=>{t();var xa=w(),qa="__lodash_hash_undefined__",Ta=Object.prototype,_a=Ta.hasOwnProperty;function Sa(e){var r=this.__data__;if(xa){var n=r[e];return n===qa?void 0:n}return _a.call(r,e)?r[e]:void 0}ke.exports=Sa});var $e=o((Kc,Ve)=>{t();var wa=w(),ja=Object.prototype,Ia=ja.hasOwnProperty;function Ca(e){var r=this.__data__;return wa?r[e]!==void 0:Ia.call(r,e)}Ve.exports=Ca});var Ye=o((Hc,We)=>{t();var Aa=w(),Oa="__lodash_hash_undefined__";function Ea(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Aa&&r===void 0?Oa:r,this}We.exports=Ea});var Je=o(($c,Xe)=>{t();var Pa=ze(),Ma=Ke(),Na=He(),Da=$e(),La=Ye();function b(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var i=e[r];this.set(i[0],i[1])}}b.prototype.clear=Pa;b.prototype.delete=Ma;b.prototype.get=Na;b.prototype.has=Da;b.prototype.set=La;Xe.exports=b});var Qe=o((Yc,Ze)=>{t();function Fa(){this.__data__=[],this.size=0}Ze.exports=Fa});var rr=o((Jc,er)=>{t();function Ga(e,r){return e===r||e!==e&&r!==r}er.exports=Ga});var j=o((Qc,tr)=>{t();var Ua=rr();function Ra(e,r){for(var n=e.length;n--;)if(Ua(e[n][0],r))return n;return-1}tr.exports=Ra});var ar=o((ru,nr)=>{t();var za=j(),Ba=Array.prototype,Ka=Ba.splice;function ka(e){var r=this.__data__,n=za(r,e);if(n<0)return!1;var i=r.length-1;return n==i?r.pop():Ka.call(r,n,1),--this.size,!0}nr.exports=ka});var ir=o((nu,or)=>{t();var Ha=j();function Va(e){var r=this.__data__,n=Ha(r,e);return n<0?void 0:r[n][1]}or.exports=Va});var cr=o((ou,sr)=>{t();var $a=j();function Wa(e){return $a(this.__data__,e)>-1}sr.exports=Wa});var pr=o((su,ur)=>{t();var Ya=j();function Xa(e,r){var n=this.__data__,i=Ya(n,e);return i<0?(++this.size,n.push([e,r])):n[i][1]=r,this}ur.exports=Xa});var fr=o((uu,gr)=>{t();var Ja=Qe(),Za=ar(),Qa=ir(),eo=cr(),ro=pr();function v(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var i=e[r];this.set(i[0],i[1])}}v.prototype.clear=Ja;v.prototype.delete=Za;v.prototype.get=Qa;v.prototype.has=eo;v.prototype.set=ro;gr.exports=v});var B=o((gu,lr)=>{t();var to=l(),no=g(),ao=to(no,"Map");lr.exports=ao});var yr=o((lu,dr)=>{t();var hr=Je(),oo=fr(),io=B();function so(){this.size=0,this.__data__={hash:new hr,map:new(io||oo),string:new hr}}dr.exports=so});var vr=o((du,br)=>{t();function co(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}br.exports=co});var I=o((bu,mr)=>{t();var uo=vr();function po(e,r){var n=e.__data__;return uo(r)?n[typeof r=="string"?"string":"hash"]:n.map}mr.exports=po});var qr=o((mu,xr)=>{t();var go=I();function fo(e){var r=go(this,e).delete(e);return this.size-=r?1:0,r}xr.exports=fo});var _r=o((qu,Tr)=>{t();var lo=I();function ho(e){return lo(this,e).get(e)}Tr.exports=ho});var wr=o((_u,Sr)=>{t();var yo=I();function bo(e){return yo(this,e).has(e)}Sr.exports=bo});var Ir=o((wu,jr)=>{t();var vo=I();function mo(e,r){var n=vo(this,e),i=n.size;return n.set(e,r),this.size+=n.size==i?0:1,this}jr.exports=mo});var Ar=o((Iu,Cr)=>{t();var xo=yr(),qo=qr(),To=_r(),_o=wr(),So=Ir();function m(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var i=e[r];this.set(i[0],i[1])}}m.prototype.clear=xo;m.prototype.delete=qo;m.prototype.get=To;m.prototype.has=_o;m.prototype.set=So;Cr.exports=m});var Pr=o((Au,Er)=>{t();var Or=Ar(),wo="Expected a function";function K(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(wo);var n=function(){var i=arguments,s=r?r.apply(this,i):i[0],p=n.cache;if(p.has(s))return p.get(s);var f=e.apply(this,i);return n.cache=p.set(s,f)||p,f};return n.cache=new(K.Cache||Or),n}K.Cache=Or;Er.exports=K});var Nr=o((Eu,Mr)=>{t();var jo=Pr(),Io=500;function Co(e){var r=jo(e,function(i){return n.size===Io&&n.clear(),i}),n=r.cache;return r}Mr.exports=Co});var Lr=o((Mu,Dr)=>{t();var Ao=Nr(),Oo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eo=/\\(\\)?/g,Po=Ao(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Oo,function(n,i,s,p){r.push(s?p.replace(Eo,"$1"):i||n)}),r});Dr.exports=Po});var Gr=o((Du,Fr)=>{t();function Mo(e,r){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=r(e[n],n,e);return s}Fr.exports=Mo});var kr=o((Fu,Kr)=>{t();var Ur=P(),No=Gr(),Do=d(),Lo=M(),Fo=1/0,Rr=Ur?Ur.prototype:void 0,zr=Rr?Rr.toString:void 0;function Br(e){if(typeof e=="string")return e;if(Do(e))return No(e,Br)+"";if(Lo(e))return zr?zr.call(e):"";var r=e+"";return r=="0"&&1/e==-Fo?"-0":r}Kr.exports=Br});var Vr=o((Uu,Hr)=>{t();var Go=kr();function Uo(e){return e==null?"":Go(e)}Hr.exports=Uo});var Wr=o((zu,$r)=>{t();var Ro=d(),zo=Se(),Bo=Lr(),Ko=Vr();function ko(e,r){return Ro(e)?e:zo(e,r)?[e]:Bo(Ko(e))}$r.exports=ko});var Xr=o((Ku,Yr)=>{t();var Ho=M(),Vo=1/0;function $o(e){if(typeof e=="string"||Ho(e))return e;var r=e+"";return r=="0"&&1/e==-Vo?"-0":r}Yr.exports=$o});var Zr=o((Hu,Jr)=>{t();var Wo=Wr(),Yo=Xr();function Xo(e,r){r=Wo(r,e);for(var n=0,i=r.length;e!=null&&n<i;)e=e[Yo(r[n++])];return n&&n==i?e:void 0}Jr.exports=Xo});var et=o(($u,Qr)=>{t();var Jo=Zr();function Zo(e,r,n){var i=e==null?void 0:Jo(e,r);return i===void 0?n:i}Qr.exports=Zo});var k=o((Yu,rt)=>{t();var Qo=Object.prototype;function ei(e){var r=e&&e.constructor,n=typeof r=="function"&&r.prototype||Qo;return e===n}rt.exports=ei});var nt=o((Ju,tt)=>{t();function ri(e,r){return function(n){return e(r(n))}}tt.exports=ri});var ot=o((Qu,at)=>{t();var ti=nt(),ni=ti(Object.keys,Object);at.exports=ni});var st=o((rp,it)=>{t();var ai=k(),oi=ot(),ii=Object.prototype,si=ii.hasOwnProperty;function ci(e){if(!ai(e))return oi(e);var r=[];for(var n in Object(e))si.call(e,n)&&n!="constructor"&&r.push(n);return r}it.exports=ci});var ut=o((np,ct)=>{t();var ui=l(),pi=g(),gi=ui(pi,"DataView");ct.exports=gi});var gt=o((op,pt)=>{t();var fi=l(),li=g(),hi=fi(li,"Promise");pt.exports=hi});var lt=o((sp,ft)=>{t();var di=l(),yi=g(),bi=di(yi,"Set");ft.exports=bi});var dt=o((up,ht)=>{t();var vi=l(),mi=g(),xi=vi(mi,"WeakMap");ht.exports=xi});var _t=o((gp,Tt)=>{t();var H=ut(),V=B(),$=gt(),W=lt(),Y=dt(),qt=y(),x=z(),yt="[object Map]",qi="[object Object]",bt="[object Promise]",vt="[object Set]",mt="[object WeakMap]",xt="[object DataView]",Ti=x(H),_i=x(V),Si=x($),wi=x(W),ji=x(Y),h=qt;(H&&h(new H(new ArrayBuffer(1)))!=xt||V&&h(new V)!=yt||$&&h($.resolve())!=bt||W&&h(new W)!=vt||Y&&h(new Y)!=mt)&&(h=function(e){var r=qt(e),n=r==qi?e.constructor:void 0,i=n?x(n):"";if(i)switch(i){case Ti:return xt;case _i:return yt;case Si:return bt;case wi:return vt;case ji:return mt}return r});Tt.exports=h});var wt=o((lp,St)=>{t();var Ii=y(),Ci=S(),Ai="[object Arguments]";function Oi(e){return Ci(e)&&Ii(e)==Ai}St.exports=Oi});var At=o((dp,Ct)=>{t();var jt=wt(),Ei=S(),It=Object.prototype,Pi=It.hasOwnProperty,Mi=It.propertyIsEnumerable,Ni=jt(function(){return arguments}())?jt:function(e){return Ei(e)&&Pi.call(e,"callee")&&!Mi.call(e,"callee")};Ct.exports=Ni});var X=o((bp,Ot)=>{t();var Di=9007199254740991;function Li(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Di}Ot.exports=Li});var Pt=o((mp,Et)=>{t();var Fi=U(),Gi=X();function Ui(e){return e!=null&&Gi(e.length)&&!Fi(e)}Et.exports=Ui});var Nt=o((qp,Mt)=>{t();function Ri(){return!1}Mt.exports=Ri});var Gt=o((C,q)=>{t();var zi=g(),Bi=Nt(),Ft=typeof C=="object"&&C&&!C.nodeType&&C,Dt=Ft&&typeof q=="object"&&q&&!q.nodeType&&q,Ki=Dt&&Dt.exports===Ft,Lt=Ki?zi.Buffer:void 0,ki=Lt?Lt.isBuffer:void 0,Hi=ki||Bi;q.exports=Hi});var Rt=o((Sp,Ut)=>{t();var Vi=y(),$i=X(),Wi=S(),Yi="[object Arguments]",Xi="[object Array]",Ji="[object Boolean]",Zi="[object Date]",Qi="[object Error]",es="[object Function]",rs="[object Map]",ts="[object Number]",ns="[object Object]",as="[object RegExp]",os="[object Set]",is="[object String]",ss="[object WeakMap]",cs="[object ArrayBuffer]",us="[object DataView]",ps="[object Float32Array]",gs="[object Float64Array]",fs="[object Int8Array]",ls="[object Int16Array]",hs="[object Int32Array]",ds="[object Uint8Array]",ys="[object Uint8ClampedArray]",bs="[object Uint16Array]",vs="[object Uint32Array]",c={};c[ps]=c[gs]=c[fs]=c[ls]=c[hs]=c[ds]=c[ys]=c[bs]=c[vs]=!0;c[Yi]=c[Xi]=c[cs]=c[Ji]=c[us]=c[Zi]=c[Qi]=c[es]=c[rs]=c[ts]=c[ns]=c[as]=c[os]=c[is]=c[ss]=!1;function ms(e){return Wi(e)&&$i(e.length)&&!!c[Vi(e)]}Ut.exports=ms});var Bt=o((jp,zt)=>{t();function xs(e){return function(r){return e(r)}}zt.exports=xs});var kt=o((A,T)=>{t();var qs=F(),Kt=typeof A=="object"&&A&&!A.nodeType&&A,O=Kt&&typeof T=="object"&&T&&!T.nodeType&&T,Ts=O&&O.exports===Kt,J=Ts&&qs.process,_s=function(){try{var e=O&&O.require&&O.require("util").types;return e||J&&J.binding&&J.binding("util")}catch{}}();T.exports=_s});var Wt=o((Ap,$t)=>{t();var Ss=Rt(),ws=Bt(),Ht=kt(),Vt=Ht&&Ht.isTypedArray,js=Vt?ws(Vt):Ss;$t.exports=js});var Xt=o((Ep,Yt)=>{t();var Is=st(),Cs=_t(),As=At(),Os=d(),Es=Pt(),Ps=Gt(),Ms=k(),Ns=Wt(),Ds="[object Map]",Ls="[object Set]",Fs=Object.prototype,Gs=Fs.hasOwnProperty;function Us(e){if(e==null)return!0;if(Es(e)&&(Os(e)||typeof e=="string"||typeof e.splice=="function"||Ps(e)||Ns(e)||As(e)))return!e.length;var r=Cs(e);if(r==Ds||r==Ls)return!e.size;if(Ms(e))return!Is(e).length;for(var n in e)if(Gs.call(e,n))return!1;return!0}Yt.exports=Us});t();var en=L(et()),rn=L(Xt());t();t();var u=chrome;var N=class{constructor(r={}){let{useManagedStorage:n}=r;if(this.useManagedStorage=!!n,!u.storage){console.error("Do not have storage access in this context");return}n?this.storage=u.storage.managed:this.storage=u.storage.local}async getAllItems(){this.throwErrorIfNoStorage();try{return await this.storage.get(null)}catch(r){if(r.message==="Managed storage manifest not found")return;console.error("Unable to get all items",r)}}async getFromStorage(r){this.throwErrorIfNoStorage();try{return(await this.storage.get(r))[r]}catch(n){if(n.message==="Managed storage manifest not found")return;console.error("Unable to get from storage",n)}}async removeFromStorage(r){this.throwErrorIfNoStorage();try{return await this.storage.remove(r)}catch(n){if(n.message==="Managed storage manifest not found")return;console.error("Unable to remove from storage",n)}}setInStorage(r,n){if(this.throwErrorIfNoStorage(),this.useManagedStorage)throw new Error("Cannot set items in managed storage");let i={[r]:n};return this.storage.set(i)}throwErrorIfNoStorage(){if(!this.storage)throw new Error("Storage is not available in this context")}addOnChangedListener(r){this.storage.onChanged.addListener(r)}removeOnChangedListener(r){this.storage.onChanged.removeListener(r)}},Z=new N,Lp=new N({useManagedStorage:!0});t();t();t();var Jt=L(d()),Q=class{executeScript(r,n){let{tabId:i,frameId:s}=r,p={tabId:i,...s&&{frameIds:[s]}},{file:f,func:ne,args:ae,world:tn,injectImmediately:nn}=n,oe=!!f,ie=!!(ne||ae);if(oe&&ie)throw new Error("Cannot inject both file and function in one call");let E={target:p,world:tn,injectImmediately:nn};return oe?E.files=[f]:ie&&(E.func=ne,E.args=ae),u.scripting.executeScript(E)}async registerContentScripts(r){if(!(0,Jt.default)(r))throw new Error("registerContentScripts must be given an array of content scripts to register");return u.scripting.registerContentScripts(r)}async unregisterContentScripts(r){return u.scripting.unregisterContentScripts(r)}},Zt=new Q;var ee=class{async getCurrentActiveTab(){let r=await u.tabs.query({active:!0,currentWindow:!0});return r?r[0]:null}getAllActiveTabs(){return u.tabs.query({active:!0})}getAllTabs(){return u.tabs.query({})}async executeScriptOnCurrentTab(r){let n=await this.getCurrentActiveTab();if(n!==null)return Zt.executeScript({tabId:n.id},r)}addListener(r,n){u.tabs[r].addListener(n)}removeListener(r,n){u.tabs[r].removeListener(n)}remove(r){return u.tabs.remove(r)}openExtensionPage(r){return u.tabs.create({url:r})}},Qt=new ee;var re=class{sendMessage(r,n){let i={...n,type:r};return u.runtime.sendMessage(i)}async sendMessageToCurrentTab(r,n,i){let s={...n,type:r},p=await Qt.getCurrentActiveTab();return u.tabs.sendMessage(p.id,s,i)}sendMessageToTab(r,n,i,s){let p={...i,type:n};return u.tabs.sendMessage(r,p,s)}addListener(r,n){let i=(s,p,f)=>s.type!==r?!1:(n(s,p,f),!0);return u.runtime.onMessage.addListener(i),()=>u.runtime.onMessage.removeListener(i)}},D=new re;var Rs="it-provision-error",zs="injected-api-key",Bs="current-settings",Ks="api-key",ks="visitor-id",Hs="number-of-apps";async function Vs(){let{managedSettings:e}=await D.sendMessage("fetchAllSettings");if(!((0,rn.default)(e)||!e.apiKey))return te(Rs),null;let{apiKey:n,visitorId:i}=$s();n&&te(zs),await Ws(n,i)}function $s(){let e=new URL(window.location),[r]=e.searchParams.getAll("api-key");console.log("The following values were provided in the URL. They may or may not be used by the extension, depending on configuration."),console.log("api-key: ",r);let[n]=e.searchParams.getAll("visitor-id");return console.log("visitor-id: ",n),{apiKey:r,visitorId:n}}async function Ws(e,r){e&&await Z.setInStorage("demoAPIKey",e),r&&await Z.setInStorage("demoVisitorId",r),te(Bs),await D.sendMessage("refetchSettings");let{localSettings:n}=await D.sendMessage("fetchAllSettings");Ys(n)}async function Ys(e){let r=document.getElementById(Ks),n=document.getElementById(ks),i=document.getElementById(Hs);if(r.innerText=e.extensionApiKeys,n.innerText=(0,en.default)(e,"visitor.id"),!e.currentApplications){i.innerText="No configuration found...are you sure the api key is correct?";return}let s=e.currentApplications.length;i.innerText=s}function te(e){let r=document.getElementById(e);r&&r.classList.remove("hidden")}Vs();})();
